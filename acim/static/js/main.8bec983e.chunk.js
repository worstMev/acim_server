(this.webpackJsonpacim_client=this.webpackJsonpacim_client||[]).push([[0],{187:function(e,t,n){},189:function(e,t,n){},190:function(e,t,n){},195:function(e,t){},197:function(e,t){},208:function(e,t){},210:function(e,t){},236:function(e,t){},238:function(e,t){},239:function(e,t){},244:function(e,t){},246:function(e,t){},265:function(e,t){},277:function(e,t){},280:function(e,t){},325:function(e,t,n){},330:function(e,t,n){},353:function(e,t,n){},354:function(e,t,n){},355:function(e,t,n){},356:function(e,t,n){},357:function(e,t,n){},358:function(e,t,n){},359:function(e,t,n){},360:function(e,t,n){},361:function(e,t,n){},362:function(e,t,n){},363:function(e,t,n){},364:function(e,t,n){},365:function(e,t,n){},369:function(e,t,n){},370:function(e,t,n){},371:function(e,t,n){},372:function(e,t,n){},373:function(e,t,n){},374:function(e,t,n){},375:function(e,t,n){},376:function(e,t,n){},377:function(e,t,n){},378:function(e,t,n){},379:function(e,t,n){},380:function(e,t,n){},381:function(e,t,n){},382:function(e,t,n){},383:function(e,t,n){},384:function(e,t,n){},385:function(e,t,n){},386:function(e,t,n){},387:function(e,t,n){},388:function(e,t,n){},389:function(e,t,n){},390:function(e,t,n){},391:function(e,t,n){},392:function(e,t,n){},393:function(e,t,n){},394:function(e,t,n){},395:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=395},396:function(e,t,n){},397:function(e,t,n){},398:function(e,t,n){},399:function(e,t,n){},400:function(e,t,n){},401:function(e,t,n){"use strict";n.r(t);var o=n(1),s=n.n(o),i=n(178),r=n.n(i),c=(n(187),n(2)),a=n(9),l=n.n(a),u=n(13),d=n(3),p=n(4),m=n(6),A=n(5),h=(n(189),n(190),n(179)),b=n.n(h),f={text:"technicien de maintenance",code:"TECH_MAIN"},g={text:"utilisateur",code:"USER"};function j(e,t){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(l.a.mark((function e(t,n){var o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.HmacMD5(t,n);case 2:return o=e.sent,s="\\x"+o,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=n(180),x=n.n(O),I="http://localhost:3500/ajax/acim";function E(e,t){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(l.a.mark((function e(t,n){var o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=x.a.create({baseURL:I}),e.prev=1,e.next=4,o.post(t,n);case 4:return s=e.sent,e.abrupt("return",s);case 8:e.prev=8,e.t0=e.catch(1),console.log("error to fetch data from ".concat(I).concat(t)),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function C(e){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(l.a.mark((function e(t){var n,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/authenticate/username",n={username:t},e.prev=2,e.next=5,E("/authenticate/username",n);case 5:return o=e.sent,console.log(" username  :"+t+" is valid "+o.data.usernameIsValid),e.abrupt("return",{usernameIsValid:o.data.usernameIsValid});case 10:e.prev=10,e.t0=e.catch(2),console.log("error in authenticateUsername"),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function k(e,t){return _.apply(this,arguments)}function _(){return(_=Object(u.a)(l.a.mark((function e(t,n){var o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/authenticate",o={username:t,password:n},e.prev=2,e.next=5,E("/authenticate",o);case 5:return s=e.sent,console.log(" authentication success for "+t+" "+s.data.found),e.abrupt("return",{isAuthenticated:s.data.found,username:s.data.row.username,num_user:s.data.row.num_user,type_user:s.data.row.type_user});case 10:e.prev=10,e.t0=e.catch(2),console.log("error in authenticate"),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}var B=n.p+"static/media/base_logo_4.55dfbd35.png",Q=n(0),N=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).changeSubmittedUsername=function(e){o.setState({submittedUsername:e.target.value})},o.changeSubmittedPassword=function(e){o.setState({submittedPassword:e.target.value})},o.checkCredentials=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,s,i,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o.state.usernameIsValid||!o.state.submittedUsername){e.next=9;break}return e.next=4,C(o.state.submittedUsername);case 4:n=e.sent,console.log(n),o.setState({usernameIsValid:n.usernameIsValid}),e.next=30;break;case 9:return console.log("authenticate username/password"),e.prev=10,e.next=13,k(o.state.submittedUsername,o.state.submittedPassword);case 13:if(s=e.sent,console.log(s),!s.isAuthenticated){e.next=25;break}return o.props.setCredentials({logged:!0,num_user:s.num_user,username:s.username,type_user:s.type_user}),e.next=19,j(g.code,s.username);case 19:return i=e.sent,e.next=22,j(f.code,s.username);case 22:r=e.sent,s.type_user===i&&o.props.history.push("/notify"),s.type_user===r&&o.props.history.push("/acim");case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(10),console.log("error in checkCrendentials",e.t0);case 30:case"end":return e.stop()}}),e,null,[[10,27]])})));return function(t){return e.apply(this,arguments)}}(),o.state={usernameIsValid:!1,submittedUsername:"",submittedPassword:""},o}return Object(p.a)(n,[{key:"render",value:function(){return Object(Q.jsxs)("div",{className:"login",children:[Object(Q.jsx)("div",{children:Object(Q.jsx)("img",{src:B,alt:"mndpt|acim",id:"logo"})}),Object(Q.jsxs)("form",{className:"login_form",onSubmit:this.checkCredentials,children:[this.state.usernameIsValid?Object(Q.jsx)("input",{type:"password",placeholder:"mot de passe",value:this.state.submittedPassword,onChange:this.changeSubmittedPassword,autoFocus:!0}):Object(Q.jsx)("input",{type:"text",placeholder:"utilisateur",value:this.state.submittedUsername,onChange:this.changeSubmittedUsername,autoFocus:!0}),Object(Q.jsxs)("button",{className:"my-button login-button",onClick:this.checkCredentials,children:[" ",">"," "]})]})]})}}]),n}(s.a.Component),S=n(11),L=(n(325),function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(Q.jsxs)("div",{id:"layout",children:[Object(Q.jsx)("main",{children:this.props.children}),Object(Q.jsxs)("footer",{children:[Object(Q.jsx)(S.b,{to:"/",children:"home"}),Object(Q.jsx)(S.b,{to:"/info",children:"info"}),Object(Q.jsx)(S.b,{to:"/acim",children:"acim"}),Object(Q.jsx)(S.b,{to:"/notify",children:"notify"})]})]})}}]),n}(s.a.Component)),D=(n(330),n.p,n(12)),T=n(182),R=Object(T.io)("http://localhost:3500",{autoConnect:!1});R.onAny((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];console.log("-- ".concat(e," "),n)}));var P={socket:R,connect:function(e,t,n){console.log(e,t,n),console.log(R),R.auth={username:e,type_user:t,num_user:n},R.connect()},disconnect:function(){console.log("my socket disconnect "),R.offAny(),R.disconnect()}},M=(n(353),n(354),n(355),n(356),function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).flipFold=function(){var e=!o.state.folded;o.setState({folded:e})},o.state={folded:o.props.folded},o}return Object(p.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.children,o=t.title,s=t.titleStyle,i=this.state.folded;return e=i?Object(c.a)(Object(c.a)({},e),{},{maxHeight:"50px",minHeight:"50px"}):Object(c.a)(Object(c.a)({},e),{},{maxHeight:"500px"}),Object(Q.jsxs)("div",{className:"foldableDiv",style:e,children:[Object(Q.jsxs)("div",{className:"foldableDiv-title",style:s,onClick:this.flipFold,children:[Object(Q.jsxs)("p",{children:[" ",o," "]}),Object(Q.jsxs)("button",{onClick:this.flipFold,children:[i?"v":"^"," "]})]}),Object(Q.jsx)("div",{className:"foldableDiv-children",children:n})]})}}]),n}(o.Component)),U="data:image/png;base64,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",F="data:image/png;base64,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",H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAYAAACAvzbMAAAACXBIWXMAAJnKAACZygHjkaQiAAANT0lEQVR42u3dW29UVR/AYT6U+p3UO0GBiGCCihyixnCBigKxIG3TJi20qLHl0M60DJ0O0DqdQo80HdoOKVC83y+zSRReLczAHPbhuXgSr7woa61f/mvPzN4RBMEOAKiXPwIAAgKAgAAgIAAICAAICAACAoCAACAgAAgIAAgIAAICgIAAICAACAgACAgAAgKAgAAgIAAICAAICAACAoCAACAgAAgIAAgIAAICgIAAICAACAgACAgAAgKAgAAgIAAICAAICAACAoCAACAgACAgAAgIPGf+yXrQUbwSfD7e+2yZ1+idH9/fVj3/n/3Z80HnnbFgbmst8O+BgEDEDCwVgn2ZzroO9qj45GlgBhcL4oKAQDNNb94LDox1xzIU9Tow3h3cqiwLCwICdV89bW0EB6/3piIWtTqavxiUHpZFBQGB/7d79JxQ1GHv079X6dF9QUFASJ+jExeFoIGOVf+e1hUCQhKVHq856FvJmkNAiLNfl6f+PtDePvmeQ71NrpZnBQUBIfoGl247tCNseLUkJggI0TGzWXY4u+ZCQKB2hyf6HcIJEP47Ws8ICM02ub7g0E2w8N/XOkdAaKTe+RsO2BTpKI0KCQLCm/k40+VATbF92S4hQUCok8MTD90REGq1sFVxSCIkCAi1C3/51cFInf7cXBUTBCTNv3rrIORN+ZVgAcEzDnC1hYCwvf3jPQ46muZgrk9IBISkOTE15ICjZcL1Zt8JCPE2vFJ0oNE2I2U/3iggeM4Bno8gIMl3qjjqwCJyehYmhURAMHWAaQQBSYzD+UEHEzH6tJafkBcQ2m7xr00HErE140uIAkJ7fFkwdRB/4Tq2nwUEzzrAsxEBIaLO38k5aEisMzNeZCUgmDrANCIgiAeICAISQ+G7qR0mpNTpmREhERBex55st0OE1Nsz1i0iAoIrK3ClJSA0zfW1eQcFbKOwsSwkAsJ/yayLB7zKwNJtEREQnnds8pLDAWp03AurBIRndmY6HQrguYiA4GE5iIiAIB4gIghIlCw9qdjw0GDhvnK+CIjJAzCJCAjPuft43QYHEREQ6nOrsmxjQ4tMVL9T5dwRENdWgElEQFLp6mrJRoY2ya7dFRIBiafpzVWbGNos3IfOIwFxbQW4zhKQRFvc8j0PiJpwXzqfBMTkAZhEBEQ8ABEREGxOEBEBQTxARBCQ5jtS8DIoiJuDuT4REZD2+nl2zGaEmOpdLIiIgLTH4NJNmxBiLtzHzjMB8dwD8DxEQMQDEBEBEQ9ARASEHcfyAzYZJNTX1U9UOucEpBkmK/dsMki4cJ877wTE1RXgKktAxAMQEQGJ4XOPSd80h7Q5PjUkIgLyZmYerdlMkFK59UURERBXV4CrLAFpoZ2ZTpsHEBEBqc/QStGmAZ59tPfBiogIiKsrwBQiIOIBiIiARMmF6vsBbBTgP1zw/hABMX0AphABaag92S6bA3ip3dlOERGQFxU2lm0OoCZzWxURERBXV4CrLAF5A9/c/M1mAOoSnhsCIiA2A2AKERDxAEREQAQEEBABEQ9ARAQkKXKVFYseaIjwPBEQ0weAKURAtnWmlLXYgYbqSenvZJk+AEwhAvIq39763SIHmuL41FAgIKYPAFOIgPzjUP6CxQ00VXjOCIjpA8AUIiA7fiqOWNRAS5yYGg4ExPQBYApJc0Au358N3vrhXQsaaJnh8mwgIKYPAFNIGgMyWblnEQNtMffkQSAgpg8AU4iAAAiIgLzCh5lfLF6grXaNnA0ExPQBYApJQ0C+n75i0QKREJ5HAmL6ADCFCAhAy5QelgMBiYEPrnZYsIApREBMH4CACEgLDFTfS2yhAhHUN58PBMT0AWAKERAAAUl9QE7PXLM4gUg7mbDvhJg+AEwhAgIgIAJSl1PFUYsSiIXvpi8HAmL6AEj1FCIgAAKSzoD8US5ajECsXFqaCgTE9AGQ2ilEQAAEREAABERAarJ79JxFCMTS3sz5QEBMHwCpnEIEBEBA0hWQua2KxQfEWniOCUjrfTRy1gIEYm3XtQ4BcX0FkL5rLAEBEBABARAQAXmpQxP9Fh2QCF/k+gIBMX0ApGoKERAAAREQAAERkG3lNhYsNiBRbmwsBwLSAvvHuiw4IFE+He8RENdXAOm5xhIQAAEREAABERABAQREQBpnYKFgkQGJFJ5vAtLET2BVXwFpoQEJ9FkMP4nl+grANZaAAAiIgAgIICACIiAAAiIgAAIiIAACkoqA9M9NWFxAol1cyAcC0gRHcl5jCyTbV/kLAuL6CiD511gCAiAgAgIgIAIiIICACIiAAAiIgAAIiIAACIiAAAiIgAgIICACIiAAAiIgAAIiIAACIiAAAiIgAgIgIAICICACAiAgAgIgIAICICACIiAAAiIgAAIiIAACIiAAAiIgAAIiIAICICACAiAgAgIgIAICICACYmEBAiIgAgIgIAICICDR9lX+goUFJNqRXL+ANMPFhbwFBiRa/9yEgLjGAkj29ZWAAAiIgAAIiIAICCAgAiIgAAIiIAACEteAfDbeY4EBibQ/c15AmmlgoWChAYkUnm8C4hoLIOnXVwICICACAiAgAiIggIAISON96pNYQNI+gTXWJSCtcGNj2YIDEiW3sSAgrrEA0nF9JSAAAiIgAAIiIK/0Ra7PggMS4dBEv4CYQgDSM30ICICACAiAgAhITXZd67DwgFj7aOSsgLTD3FbFAgRiLTzHBMQ1FkCarq8EBEBA0hmQvdVXQFqEQAztHj0nIKYQgPRNHwICICACAiAgAlKXS0tTFiIQK3+UiwJiCgFI5/QhIAACku6AfDd92YIEYuFUcVRATCEA6Z0+BARAQATk5PQVCxOItNMz1wTEFAKQ7ulDQAAERECq+ubzFigQSQOLBQExhQCYPgQEoAU+uNohIHFQeli2YAHTh4CYQgABEZAW+t53QoCICM8jATGFAJg+UhCQXSNnLVygrT7M/CIgphAA04eAAAiIgLzK3JMHFjDQFpOVewJiCgEwfaQyIMPlWQsZaJm3fng3uHx/VkBMIQCmj1QH5MTUsAUNtMRPxREBMYUAmD4E5KlD+QsWNtBU4TkjIKYQANOHgPzt+NSQBQ40xbe3fhcQUwiA6UNA/kNP9b3EFjvQQGdKWQExhQCYPgTkJXKVFQseaIjwPBEQUwiA6UNARAQQDwEREEBABEREAPEQkKT45uZvNgJQl/DcEBABMYUApg8BeW1zWxUbAqhJYWNZQATkRbuznTYH8FJ7sl3iISCusgBXVwLSQBf8ThawjfB8cE4KiCkEMH0IiIgA4iEg0TH5wI8tAs8MrRQFREBMIUB9dmY6xUNARARwdSUgLZRbX7SBIKVmHq0JiIC8meNTQzYTpMyxyUviISCusgBXVwIiIoB4CEgsP9pbuWdjQcKF+9x5JyDN8HXhkk0GSX3ukR8QDwFxlQW4uhIQEQHEQ0BEBBAPAeGpwaWbNh7EXLiPnWcC0g693h8CsfXz7Jh4CEh7Hcz12YwQM0cKvmkuIJ6HAJ57CIiIAOIhICICiIeAICIgHghISyxuVWxUiJhwXzqfBMQkApg8BCTRpjdXbVxos3AfOo8EJI6ya3dtYmiTq6sl8RAQ11mAaysBSamJ9XkbGlrkVmVZQATEJALU5+7jdfEQEBEBXFsJCC9YeuJ7ItBo4b5yvgiISQQweQgIIgLiISCICETHzkyneAgIVcenhhwKUKNjk14GJSC8YGDptsMBXiFT/U6V80JA+LfCxrJDArZxfU08BATPRcDDcgGhefaMdTs0SL092W7xEBBex+mZEYcIqdVRGhUPAcGVFriyEhBEBMQDAYmfMzOjDhcS6/ydnHgICKYRMHUICJH1ZWHQoUPshevYfhYQWm/mYdkhRGwt/rUpHgJCux3M9TuQiI3DeVOHgODZCHjWISAkR8/CpEOKyDlV9KVAAcE0AqYOBCT5RsolhxdtM7xSFA8BIe5OeGEVLRSuN/tOQEjap7X6HHA0zf7xHuEQEDwfAc85EBC2UfIlRBpgfmtDPASEtPpzc9VBSN1uVZaFAwHB1Ra1W9iqCAcCgpDgGQcCQpPsy3Y5OFPs40yXcCAgvJnw3dQO1NTonb8hHAgIjTW5vuCATbDw39c6R0BotsMTfkI+ET+tXv13tJ4REDx0p1Yzm2XhQECIjuFVP94YZYNLt0UDASH6rpZnHdpt8vbJ9/7+71+Xp0QDAcE1F7UpPV4TDQSEZDo2cdFB30BHq39P6woBIXU/6vjofrB39JwQ1GF39e9l7SAg8O9fCT6aN6E87+D1Xr96i4DA66j+8uuB8e5UxOLAWHcwvXlPLBAQaKbBxULwSfZ8LEOxL9MZDCwVhAIBgaiZ21oLOu+MBfvrDMw7P76/rXr+P5+P9wYdxSvB/JN1kUBAAEBAABAQAAQEAAEBQEAAQEAAEBAABAQAAQFAQABAQAAQEAAEBAABAUBAAEBAABAQAAQEAAEBQEAAQEAAEBAABAQAAQFAQABAQAAQEAAEBAABAQABAUBAABAQAAQEAAEBAAEBQEAAEBAABAQAAQEAAQGgEf4H8HynGONoYUEAAAAASUVORK5CYII=",W=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).showDetails=function(){o.setState({detailsAreShown:!o.state.detailsAreShown})},o.goToIntervention=function(e){o.props.showSub(e)},o.state={detailsAreShown:!1},o}return Object(p.a)(n,[{key:"render",value:function(){var e,t,o,s,i,r=this,a=(this.props.isChild,this.props.intervention),l=a.date_programme,u=a.num_intervention,d=a.libelle_lieu,p=a.motif,m=a.intervention_type,A=a.commentaire,h=a.libelle_intervention_type,b=a.tech_main_username,f=a.numero,g=a.done,j=a.probleme_resolu,v=a.libelle_probleme_tech_type,O=a.code_intervention_type,x=a.children,I=x&&x.length>0,E={display:"none",height:"0"},y=Object(Q.jsx)("img",{src:F}),C=Object(Q.jsx)("img",{src:"data:image/png;base64,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"}),w=C,k=C;this.state.detailsAreShown&&(E={height:"45%"},e={},t={height:"auto"}),g&&(w=y),j&&(k=y),this.props.selected&&(t=Object(c.a)(Object(c.a)({},t),{},{background:"rgb(169, 200, 247)"})),g?j?(s=Object(c.a)({},s),t=Object(c.a)(Object(c.a)({},t),{},{background:"#2c9b8561"}),o=Object(c.a)({},o),E=Object(c.a)({},E)):(s=Object(c.a)({},s),t=Object(c.a)(Object(c.a)({},t),{},{background:"#f3b84457",border:"3px solid #f3bc4e"}),o=Object(c.a)({},o),E=Object(c.a)({},E)):(s=Object(c.a)({},s),t=Object(c.a)(Object(c.a)({},t),{},{background:"#ff000069",border:"3px solid red"}),o=Object(c.a)({},o),E=Object(c.a)({},E)),s=Object(c.a)({},s),x&&(i=x.map((function(e,t){return Object(Q.jsx)(n,{intervention:e,showSub:r.props.showSub},e.num_intervention)})));var _=Object(Q.jsxs)("div",{className:"toDo-details",style:E,children:[Object(Q.jsxs)("p",{children:[" Type : ",h," - ",A," "]}),Object(Q.jsxs)("p",{children:[" Motif : ",p," "]}),Object(Q.jsxs)("p",{children:[" Lieu : ",d," "]}),Object(Q.jsxs)("p",{children:[" Cr\xe8\xe8e par : ",b," "]}),Object(Q.jsxs)("p",{children:[" ID intervention : ",u," "]}),Object(Q.jsxs)("p",{children:[" Probleme constat\xe9 : ",v||"ND"," "]}),Object(Q.jsxs)("p",{children:[" ",g?"EFFECTUE":"NON-EFFECTUE"," et ",j?"RESOLU":"NON-RESOLU"," "]}),I&&Object(Q.jsx)(M,{title:"Suite ... ",folded:!0,children:Object(Q.jsx)("div",{className:"childList",children:i})}),Object(Q.jsx)("button",{onClick:function(){return r.goToIntervention(u)},className:"myButton",children:this.props.selected?"Fermer":"Ouvrir"})]});return Object(Q.jsxs)("div",{className:"toDo",style:t,children:[Object(Q.jsxs)("div",{className:"toDo-sum",style:e,children:[Object(Q.jsxs)("div",{className:"time",style:o,children:[Object(Q.jsx)("div",{className:"date",children:new Date(l).toLocaleDateString("fr-FR")}),Object(Q.jsx)("div",{className:"hour",children:new Date(l).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),Object(Q.jsxs)("div",{className:"info",style:s,children:[Object(Q.jsxs)("div",{className:"dots",children:[Object(Q.jsxs)("div",{className:"done",style:{},children:[w,Object(Q.jsx)("p",{children:" Effectu\xe9 "})]}),Object(Q.jsxs)("div",{className:"probleme_resolu",style:{},children:[k,Object(Q.jsx)("p",{children:" Probleme r\xe9solue "})]})]}),Object(Q.jsx)("div",{className:"tache_description",children:Object(Q.jsxs)("p",{id:"tache_description",children:[" ",m||h," - ",d," "]})}),Object(Q.jsxs)("p",{id:"tech_main_username",children:[" ",b," "]}),Object(Q.jsxs)("p",{children:[" #",f," ",Object(Q.jsx)("br",{})," ",O," ",Object(Q.jsx)("br",{})," ",u.substring(0,8)]})]})]}),_,Object(Q.jsx)("div",{className:"details-bt",children:Object(Q.jsx)("button",{onClick:this.showDetails,className:"myButton",children:"Details"})})]})}}]),n}(s.a.Component),G=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).componentDidMount=function(){console.log("ToDoList did mount"),o.props.socket.emit("get undone intervention",o.props.num_tech_main),o.props.socket.on("list undone intervention",(function(e){console.log("list undone intervention",e);var t=e.map((function(e,t){return{num_intervention:e.num_intervention,num_intervention_pere:e.num_intervention_pere,date_programme:e.date_programme,libelle_lieu:e.libelle,libelle_intervention_type:e.libelle_intervention_type,tech_main_username:e.username,motif:e.motif,numero:t+1,done:e.done,libelle_probleme_tech_type:e.libelle_probleme_tech_type,code_intervention_type:e.code_intervention_type,children:e.children,commentaire:e.commentaire}}));console.log("new list intervention undone",t),o.props.setNbInterventionUndone&&o.props.setNbInterventionUndone(t.length);var n=new Date((new Date).setHours(23,59,59)).getTime(),s=t.filter((function(e){return new Date(e.date_programme).getTime()<=(new Date).getTime()})),i=t.filter((function(e){var t=new Date(e.date_programme).getTime();return t>new Date((new Date).setHours(0,0,0)).getTime()&&t<=n})),r=t.filter((function(e){return new Date(e.date_programme).getTime()>n}));console.log("newListToday",i),o.setState({interventionListUndone:t,interventionListUndoneLate:s,interventionListUndoneToday:i,interventionListUndoneFuture:r})})),o.props.socket.on("new intervention",(function(){console.log("new intervention todolist"),o.props.socket.emit("get undone intervention")})),o.props.socket.on("ended intervention",(function(){console.log("ended intervention todolist"),o.props.socket.emit("get undone intervention")})),o.props.socket.on("intervention data -toDoList",(function(){console.log("intervention date -toDoList"),o.props.socket.emit("get undone intervention")}))},o.clickOnToDoList=function(){},o.componentWillUnmount=function(){console.log("ToDoList will unmount"),o.props.socket.off("list undone intervention")},o.displayToDo=function(e){return e.map((function(e){return Object(Q.jsx)(W,{showSub:o.props.showSub,intervention:e},e.num_intervention)}))},o.state={interventionListUndone:[],interventionListUndoneLate:[],interventionListUndoneToday:[],interventionListUndoneFuture:[]},o}return Object(p.a)(n,[{key:"componentDidUpdate",value:function(){console.log("update toDoList")}},{key:"render",value:function(){var e=this.state,t=e.interventionListUndoneLate,n=e.interventionListUndoneToday,o=e.interventionListUndone,s=e.interventionListUndoneFuture,i="En retard : ".concat(t.length),r="Aujourd'hui : ".concat(n.length),c="A venir : ".concat(s.length),a="Toutes : ".concat(o.length);return Object(Q.jsxs)("div",{id:"toDoList",onClick:this.clickOnToDoList,children:[Object(Q.jsxs)("p",{children:[" ",this.props.topText||"Liste des taches a faire :"," "]}),Object(Q.jsxs)("div",{className:"scroll_list",children:[Object(Q.jsx)(M,{title:i,titleStyle:{color:"red"},folded:!0,children:Object(Q.jsx)("div",{className:"scroll_list",children:this.displayToDo(this.state.interventionListUndoneLate)})}),Object(Q.jsx)(M,{title:r,children:Object(Q.jsx)("div",{className:"scroll_list",children:this.displayToDo(this.state.interventionListUndoneToday)})}),Object(Q.jsx)(M,{title:c,folded:!0,children:Object(Q.jsx)("div",{className:"scroll_list",children:this.displayToDo(this.state.interventionListUndoneFuture)})}),Object(Q.jsx)(M,{title:a,folded:!0,children:Object(Q.jsx)("div",{className:"scroll_list",children:this.displayToDo(this.state.interventionListUndone)})})]})]})}}]),n}(s.a.Component),Y=(n(357),n(358),{code:"MAX",libelle:"tres urgent"}),X={code:"MID",libelle:"moyennement urgent"},V={code:"MIN",libelle:"pas urgent"},z=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).showDetails=function(){o.state.commandAreShown||o.setState({detailsAreShown:!o.state.detailsAreShown})},o.showCommand=function(){o.setState({commandAreShown:!o.state.commandAreShown,detailsAreShown:!o.state.commandAreShown})},o.do=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=o.props.notif.num_notification,n=o.props.num_user;console.log("do the notif #".concat(t," ").concat(e," by ").concat(n)),o.props.socket.emit("tech_main do",{num_notification:t,num_app_user_tech_main:n,delai:e}),o.notifRef.current.style.border="2px solid green"},o.call=function(e){var t=e.username_user,n={num_user:e.num_app_user_user,username:t};o.props.addToListToCall(n)},o.state={detailsAreShown:!1,commandAreShown:!1},o.notifRef=s.a.createRef(),o}return Object(p.a)(n,[{key:"render",value:function(){var e,t,n,o,s=this,i=this.props.notif,r=i.probleme_type,a=i.lieu,l={username_user:this.props.notif.sender_username,num_app_user_user:this.props.notif.num_app_user_sender},u=this.props.notif.sender_username;switch(this.props.notif.statut_code){case Y.code:e={borderLeft:"13px solid red"},n={color:"red",fontWeight:"bold"};break;case X.code:e={borderLeft:"13px solid yellow"},n={color:"yellow",fontWeight:"bold"};break;case V.code:e={borderLeft:"13px solid blue"},n={color:"blue"}}return(this.state.detailsAreShown||this.state.commandAreShown)&&(o={height:"80%"},t={height:"15%"},e=Object(c.a)(Object(c.a)({},e),{},{height:"300px"})),Object(Q.jsxs)("div",{className:"notif",style:e,ref:this.notifRef,children:[Object(Q.jsxs)("div",{className:"notif-sum",style:t,children:[Object(Q.jsxs)("div",{className:"probleme_type",children:[Object(Q.jsxs)("p",{children:[" ",this.props.notif.probleme_type," "]}),Object(Q.jsxs)("p",{children:[" ",this.props.notif.code," "]})]}),Object(Q.jsxs)("div",{className:"probleme_statut",style:n,children:[Object(Q.jsxs)("p",{children:[" ",this.props.notif.statut_libelle," "]}),Object(Q.jsxs)("p",{children:[" ",this.props.notif.lieu," "]})]}),Object(Q.jsxs)("div",{className:"date_envoie",children:[Object(Q.jsx)("p",{children:" Date d'envoie : "}),Object(Q.jsxs)("p",{children:[" ",this.props.notif.date_envoie," "]})]}),Object(Q.jsx)("button",{className:"myButton",onClick:this.showDetails,children:" Details "}),Object(Q.jsx)("button",{className:"myButton",onClick:this.showCommand,children:" repondre "})]}),this.state.detailsAreShown&&Object(Q.jsxs)("div",{className:"notif-details",style:o,children:[Object(Q.jsxs)("p",{children:[" Probleme notifi\xe9 : ",r," "]}),Object(Q.jsxs)("p",{children:[" Remarque : ",this.props.notif.remarque||"-"," "]}),Object(Q.jsxs)("p",{children:[" Lieu : ",a," "]}),Object(Q.jsxs)("p",{children:[" Envoyee par : ",this.props.notif.sender_username||"-"," "]})]}),this.state.commandAreShown&&Object(Q.jsxs)("div",{className:"notif-command",children:[Object(Q.jsx)("button",{className:"myButton",onClick:function(){return s.do()},children:"prendre en charge"}),Object(Q.jsx)("button",{className:"myButton",onClick:function(){return s.do(60)},children:"faire patienter"}),Object(Q.jsx)("button",{className:"myButton",onClick:function(){return s.call(l)},children:"Appeler"})]}),this.state.isCalling&&Object(Q.jsx)("div",{children:Object(Q.jsxs)("p",{children:[" Appeller ",u," "]})})]})}}]),n}(s.a.Component),Z=(n(359),function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).showDetails=function(){o.setState({detailsAreShown:!o.state.detailsAreShown})},o.showInfoOf=function(e){o.props.showSub(e)},o.state={detailsAreShown:!1},o}return Object(p.a)(n,[{key:"render",value:function(){var e,t,n,o,s=this;switch(this.props.notif.statut_code){case Y.code:e={borderLeft:"3px solid red"},n={color:"red",fontWeight:"bold"};break;case X.code:e={borderLeft:"3px solid yellow"},n={color:"yellow",fontWeight:"bold"};break;case V.code:e={borderLeft:"3px solid blue"},n={color:"blue"}}this.state.detailsAreShown&&(o={height:"80%"},t={height:"15%"},e=Object(c.a)(Object(c.a)({},e),{},{height:"300px"})),this.props.notif.num_app_user_tech_main&&this.props.notif.date_reponse&&(e=Object(c.a)(Object(c.a)({},e),{},{background:"#a9c8f7"}));var i=this.props.notif,r=i.probleme_type,a=i.code,l=i.statut_libelle,u=i.lieu,d=i.date_envoie,p=i.remarque,m=i.tech_main_username,A=i.date_reponse,h=i.num_notification,b=i.num_intervention,f=i.date_programme;return Object(Q.jsxs)("div",{className:"notif_history",style:e,children:[Object(Q.jsxs)("div",{className:"notif_history-sum",style:t,children:[Object(Q.jsxs)("div",{className:"date_envoie",children:[Object(Q.jsx)("p",{children:" Date d'envoie : "}),Object(Q.jsxs)("p",{children:[" ",d," "]})]}),Object(Q.jsxs)("div",{className:"probleme_type",children:[Object(Q.jsxs)("p",{children:[" ",r," "]}),Object(Q.jsxs)("p",{children:[" ",a," "]})]}),Object(Q.jsxs)("div",{className:"probleme_statut",style:n,children:[Object(Q.jsxs)("p",{children:[" ",l," "]}),Object(Q.jsxs)("p",{children:[" ",u," "]})]}),Object(Q.jsx)("button",{onClick:this.showDetails,className:"myButton",children:" Details "})]}),this.state.detailsAreShown&&Object(Q.jsxs)("div",{className:"notif-details",style:o,children:[Object(Q.jsxs)("p",{children:[" Intervention de ",m," le ",f," "]}),Object(Q.jsxs)("p",{children:[" remarque: ",p," "]}),Object(Q.jsxs)("p",{children:[" prise en charge par : ",m,"  "]}),Object(Q.jsxs)("p",{children:[" repondue le : ",A," "]}),Object(Q.jsxs)("p",{children:[" ID notification : ",h," "]}),Object(Q.jsxs)("p",{children:[" ID intervention :","nd"!==b&&Object(Q.jsxs)("button",{href:"#",onClick:function(){return s.showInfoOf(b)},children:[" ",b," "]})]})]})]})}}]),n}(s.a.Component)),K=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).displayNotif=function(e){return e.map((function(e){return Object(Q.jsx)(z,{notif:e,num_user:o.props.session.num_user,socket:o.props.socket,deleteFromListToCall:o.props.deleteFromListToCall,addToListToCall:o.props.addToListToCall},e.num_notification)}))},o.componentDidMount=function(){o.props.socket.emit("get notifs list unanswered"),o.props.socket.emit("get notifs today",new Date((new Date).setHours(4,0,0))),o.props.socket.on("unanswered notifs list",(function(e){var t=e.map((function(e){return{num_notification:e.num_notification,sender_username:e.user_sender_username,num_app_user_sender:e.num_app_user_user,probleme_type:e.probleme_type,probleme_code:e.code,statut_code:e.statut,statut_libelle:e.statut_libelle,lieu:e.lieu,remarque:e.remarque,date_envoie:new Date(e.date_envoie).toLocaleString("fr-FR")}}));o.props.setNbNewNotif&&o.props.setNbNewNotif(t.length),o.setState({unansweredNotifsList:t})})),o.props.socket.on("new notif",(function(e){o.props.socket.emit("get notifs list unanswered"),o.props.socket.emit("get notifs today",new Date((new Date).setHours(4,0,0)))})),o.props.socket.on("update notifs list unanswered",(function(){console.log("update notifs list unanswerd"),setTimeout((function(){o.props.socket.emit("get notifs list unanswered"),o.props.socket.emit("get notifs today",new Date((new Date).setHours(4,0,0)))}),2e3)})),o.props.socket.on("notifs today -notifsList",(function(e){console.log("notifs day -notifsList",e);var t=e.map((function(e){return{num_notification:e.num_notification,sender_username:e.user_sender_username,num_app_user_sender:e.num_app_user_user,probleme_type:e.probleme_type,probleme_code:e.code,statut_code:e.statut,statut_libelle:e.statut_libelle,lieu:e.lieu,remarque:e.remarque,date_envoie:new Date(e.date_envoie).toLocaleString("fr-FR"),num_app_user_tech_main:e.num_app_user_tech_main,date_reponse:new Date(e.date_reponse).toLocaleString("fr-FR"),num_intervention:e.num_intervention,date_programme:new Date(e.date_programme).toLocaleString("fr-FR"),tech_main_username:e.tech_main_username}}));o.setState({notifsToday:t})}))},o.componentWillUnmount=function(){console.log("UNMOUNT notifsList"),o.props.socket.off("unanswered notifs list"),o.props.socket.off("update notifs list unanswered"),o.props.socket.off("notifs today -notifsList")},o.state={unansweredNotifsList:[],notifsToday:[]},o}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.unansweredNotifsList,o=t.notifsToday,s=o.map((function(t){return t.num_intervention?Object(Q.jsx)(Z,{notif:t},t.num_notification):Object(Q.jsx)(z,{notif:t,num_user:e.props.session.num_user,socket:e.props.socket,deleteFromListToCall:e.props.deleteFromListToCall,addToListToCall:e.props.addToListToCall},t.num_notification)}));return Object(Q.jsxs)("div",{id:"notifsList",onClick:this.onClickOnNotifsList,children:[Object(Q.jsxs)("p",{children:[" Notifications recues ",this.props.session.username," "]}),Object(Q.jsxs)("div",{className:"scroll_list",children:[Object(Q.jsx)(M,{title:"non repondue : ".concat(n.length),children:Object(Q.jsx)("div",{id:"scroll_list-notifsList",children:this.displayNotif(this.state.unansweredNotifsList)})}),Object(Q.jsx)(M,{title:"Notifications recues aujourd'hui : ".concat(o.length),folded:!0,children:Object(Q.jsx)("div",{id:"scroll_list-notifsList",children:s})})]})]})}}]),n}(s.a.Component),J=n(22),q=n(20),$=(n(360),n(361),function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=(this.props.array||[]).map((function(e){return Object(Q.jsx)("option",{value:e,children:e},e)}));return this.props.objArray&&(t=this.props.objArray.map((function(e){return Object(Q.jsx)("option",{value:e.value,children:e.libelle},e.key)}))),Object(Q.jsx)("div",{className:"dropDown",children:Object(Q.jsx)("select",{defaultValue:this.props.selectedValue,value:this.props.value,onChange:function(t){return e.props.onChange(t)},children:t})})}}]),n}(s.a.Component)),ee=n(17),te=(n(362),n(363),n(364),n(365),function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=(this.props.array||[]).map((function(e){return Object(Q.jsx)("option",{value:e,children:e},e)}));return this.props.objArray&&(t=this.props.objArray.map((function(e){return Object(Q.jsx)("option",{value:e.value,children:e.libelle},e.key)}))),Object(Q.jsx)("div",{className:"dropDown",children:Object(Q.jsx)("select",{defaultValue:this.props.selectedValue,value:this.props.value,onChange:function(t){return e.props.onChange(t)},children:t})})}}]),n}(s.a.Component)),ne=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).updateLieu=function(e){console.log("updateLieu",e.target.value),console.log("this.materiel",o.materiels);var t=Object.getOwnPropertyNames(o.materiels[e.target.value])[0],n=o.materiels[e.target.value][t],s={num:n[0].value,type:t,lieu:e.target.value,config:o.state.config};console.log("objMateriel",s),o.props.onChange(s),o.setState({selectedLieu:e.target.value,selectedMaterielType:t,materielTypes:Object.getOwnPropertyNames(o.materiels[e.target.value]),materielList:n})},o.updateMaterielType=function(e){console.log("updateMaterielType",e.target.value),console.log("this.materiel",o.materiels);var t=o.materiels[o.state.selectedLieu][e.target.value],n={num:t[0].value,type:e.target.value,lieu:o.state.selectedLieu,config:o.state.config};o.props.onChange(n),o.setState({selectedMaterielType:e.target.value,materielList:t})},o.updateMateriel=function(e){console.log("updateMateriel",e.target.value);var t={num:e.target.value,type:o.state.selectedMaterielType,lieu:o.state.selectedLieu,config:o.state.config};o.props.onChange(t)},o.updateConfig=function(e){var t={num:o.props.selectedNumMateriel,type:o.state.selectedMaterielType,lieu:o.state.selectedLieu,config:e.target.value};o.props.onChange(t),o.setState({config:e.target.value})},o.sortMaterielsByType=function(e,t){var n,o={nd:[{key:"nd",libelle:"nd",value:"nd"}]},s=Object(q.a)(t);try{var i=function(){var t=n.value;e.filter((function(e){return e.num_materiel_type===t.num_materiel_type})).map((function(e){return{key:e.num_materiel,value:e.num_materiel,libelle:e.libelle_materiel}})).length&&(o[t.libelle_materiel_type]=e.filter((function(e){return e.num_materiel_type===t.num_materiel_type})).map((function(e){return{key:e.num_materiel,value:e.num_materiel,libelle:e.libelle_materiel}})))};for(s.s();!(n=s.n()).done;)i()}catch(r){s.e(r)}finally{s.f()}return o},o.state={materielTypes:[],lieus:[],selectedLieu:o.props.selectedLieu||"nd",selectedMaterielType:o.props.selectedMaterielType||"nd",materielList:[],config:""},o.materiels=null,o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.socket.emit("get materiel list"),this.props.socket.on("materiel list -materielSelector",(function(t,n,o){console.log("materiels",t,n,o);var s,i={nd:{nd:[{key:"nd",libelle:"nd",value:"nd"}]}},r=Object(q.a)(o);try{var a=function(){var o=s.value;i=Object(c.a)(Object(c.a)({},i),{},Object(J.a)({},o.libelle,e.sortMaterielsByType(t.filter((function(e){return e.num_lieu===o.num_lieu})),n)))};for(r.s();!(s=r.n()).done;)a()}catch(p){r.e(p)}finally{r.f()}console.log("materielsListLieu",i),(o=o.map((function(e){return e.libelle}))).unshift("nd"),e.materiels=i;var l,u=e.state.selectedMaterielType,d=e.state.selectedLieu;n=Object.getOwnPropertyNames(e.materiels[d]),console.log("materielTypes",n),console.log("materielsList",i,n,o),e.materiels&&(console.log("selectedLieu :%c, materielsList : %c",d,e.materiels[d]),l=e.materiels?e.materiels[d][u]:[]),e.setState({lieus:o,materielTypes:n,materielList:l})}))}},{key:"componentWillUnmount",value:function(){console.log("materielSelector unmount"),this.props.socket.off("materiel list -materielSelector")}},{key:"render",value:function(){var e=this.state,t=e.materielTypes,n=e.materielList,o=e.config,s=e.lieus,i=e.selectedLieu,r=this.props.selectedNumMateriel,c=this.props.title,a=this.props.selectedMaterielType||this.state.selectedMaterielType;return Object(Q.jsx)("div",{className:"materielSelector",children:Object(Q.jsxs)(M,{title:c||"Materiel",children:[Object(Q.jsxs)("div",{className:"sub-category-option",children:[Object(Q.jsx)("label",{children:" Lieu "}),Object(Q.jsx)(te,{value:i,array:s,onChange:this.updateLieu})]}),Object(Q.jsxs)("div",{className:"sub-category-option",children:[Object(Q.jsx)("label",{children:" Type materiel:"}),Object(Q.jsx)(te,{value:a,array:t,onChange:this.updateMaterielType})]}),Object(Q.jsxs)("div",{className:"sub-category-option",children:[Object(Q.jsx)("label",{children:" Materiel:"}),Object(Q.jsx)(te,{value:r,objArray:n,onChange:this.updateMateriel})]}),Object(Q.jsx)("div",{className:"sub-category-option",children:Object(Q.jsxs)("label",{children:[" Note:",Object(Q.jsx)("textarea",{value:o,onChange:this.updateConfig,children:" "})]})})]})})}}]),n}(o.Component);function oe(e){var t=e.listMateriel,n=e.maxListMaterielLength?e.maxListMaterielLength:77,o=e.title?e.title:"Selectionner le(s) materiel(s)",s=!!e.folded&&e.folded;function i(o){console.log("changeListMaterielLength",o),o=(o=o<0?0:o)>n?n:o;var s=t.slice();if(o>s.length){var i=o-s.length;console.log("dLength",i);for(var r=0;r<i;r++)s.push({num:"nd",type:"nd"})}else o<s.length&&(s.length=o);e.setListMateriel(s)}console.log("listMateriel before render",t);var r=t.map((function(n,o){return Object(Q.jsx)(ne,{title:"Materiel #".concat(o+1),socket:e.socket,onChange:function(n){return function(n,o){console.log("changeListMateriel");var s=t.slice();s[o]=n,e.setListMateriel(s)}(n,o)},selectedNumMateriel:n.num,selectedMaterielType:n.type,selectedLieu:n.lieu},o)}));return Object(Q.jsx)("div",{className:"multiMaterielSelector",children:Object(Q.jsxs)(M,{title:o,folded:s,children:[Object(Q.jsxs)("p",{children:[" Nombres : ",t.length]}),Object(Q.jsx)("div",{className:"scroll_list",children:r}),n>1&&Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("button",{onClick:function(){return i(t.length+1)},children:" + "}),Object(Q.jsx)("button",{onClick:function(){return i(t.length-1)},children:" - "})]})]})})}var se=n(366);n(368).saveAs,se.Document,se.Packer,se.Paragraph,se.TextRun;function ie(e){var t,n,s,i=new Date((new Date).setDate((new Date).getDate()+1)),r=Object(o.useState)([{num:"nd",type:"nd",lieu:"nd"}]),a=Object(ee.a)(r,2),l=a[0],u=a[1],d=Object(o.useState)(new Date),p=Object(ee.a)(d,2),m=p[0],A=p[1],h=Object(o.useState)(i),b=Object(ee.a)(h,2),f=b[0],g=b[1],j=e.num_decharge,v="Effectuer un decharge";return j?(v="ID decharge : ".concat(j),t=Object(c.a)(Object(c.a)({},t),{},{background:"#53d35342"}),n=Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsx)("button",{onClick:function(){return e.downloadDechargeDoc(j)},children:" Telecharger Docx"})}),s=!0):n=Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsxs)("label",{children:[" Debut :",Object(Q.jsx)("input",{type:"date",value:re(m),onChange:function(e){console.log("updateDateDebut",e.target.value),A(new Date(e.target.value))},disabled:s})]}),Object(Q.jsxs)("label",{children:[" Fin :",Object(Q.jsx)("input",{type:"date",value:re(f),onChange:function(e){return g(new Date(e.target.value))},disabled:s})]}),Object(Q.jsx)(oe,{socket:e.socket,listMateriel:l,setListMateriel:u}),Object(Q.jsx)("button",{onClick:function(){var t=l.filter((function(e){return"nd"!==e.num&&"nd"!==e.type}));if(console.log("materielsValide",t),t.length&&m.getTime()<=f.getTime()&&!j){console.log("createDecharge",m,f,t);var n={debut:m,fin:f};e.socket.emit("create decharge",n,t)}else console.log("pas de materiels valide OU date invalide, InterventionDecharge")},children:" Creer "})]}),console.log("render InterventionDecharge"),Object(Q.jsx)("div",{className:"interventionDecharge",style:t,children:Object(Q.jsx)(M,{title:v,folded:!0,children:Object(Q.jsx)("div",{className:"decharge-form",children:n})})})}function re(e){var t="".concat(e.getDate()),n="".concat(e.getMonth()+1),o=e.getFullYear();return n=n.length<2?"0"+n:n,t=t.length<2?"0"+t:t,"".concat(o,"-").concat(n,"-").concat(t)}n(369),n(370);var ce=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).toggleShowMenu=function(){var e=!o.state.showMenu;o.setState({showMenu:e})},o.state={showMenu:!1},o}return Object(p.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props.intervention,o=n.date_programme,s=n.libelle_intervention_type,i=n.libelle_lieu,r=n.tech_main_username,c=n.num_intervention,a=n.probleme_resolu,l=n.done,u=this.state.showMenu,d=new Date(o).toLocaleTimeString("fr-FR"),p=Object(Q.jsx)("img",{src:U}),m=Object(Q.jsx)("img",{src:H}),A=m;return l&&(A=Object(Q.jsx)("img",{src:"data:image/png;base64,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"}),a&&(A=p)),e=u?{display:"flex"}:{display:"none"},Object(Q.jsxs)("div",{className:"interventionSimple",children:[Object(Q.jsxs)("div",{className:"main",onClick:this.toggleShowMenu,children:[Object(Q.jsx)("div",{className:"done",style:{width:"20px",minWidth:"20px",maxWitdh:"20px",height:"auto"},children:A}),Object(Q.jsx)("div",{className:"text",children:Object(Q.jsxs)("p",{children:[" ",d,"  >",s," - ",i," par ",r," "]})})]}),Object(Q.jsx)("div",{className:"menu",style:e,children:Object(Q.jsx)("button",{onClick:function(){return t.props.showSub(c)},children:"Ouvrir"})})]})}}]),n}(o.Component),ae=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).setSelectedInterv=function(e){e&&o.setState({selectedInterv:e})},o.setFreeDate=function(){var e=o.props.setSelectedDate,t=o.state.selectedInterv;if(t.num_intervention&&e){var n=new Date(t.date_programme).getTime()+36e5;console.log("free time time ",n),n+=108e5,n=new Date(n).setMilliseconds(0);var s={target:{value:new Date(n).toISOString().replace("Z","")}};console.log("free time",s.target.value),e&&e(s),o.props.close()}},o.state={intervByDay:[],selectedInterv:{}},o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("Agenda did mount");var t=this.props,n=t.date_debut,o=t.date_fin;this.props.socket.emit("get agenda",n,o,this.props.session.num_user),this.props.socket.on("agenda -agenda",(function(t){console.log("agenda -agenda",t),t.length>0&&e.setState({intervByDay:t})}))}},{key:"componentWillUnmount",value:function(){console.log("Agenda unmount"),this.props.socket.off("agenda -agenda")}},{key:"render",value:function(){var e,t=this,n=this.state,o=n.intervByDay,s=n.selectedInterv,i=this.props.showHeader,r=o.map((function(e){return Object(Q.jsx)(le,{date:e.date,listInterv:e.intervList,showSub:t.props.showSub,selectedInterv:s,setSelectedInterv:t.setSelectedInterv},e.date)})),c="";return s.num_intervention&&(c=Object(Q.jsxs)("p",{children:["Apr\xe8s ",s.libelle_intervention_type,"--",s.libelle_lieu," \xe0 ",new Date(s.date_programme).toLocaleString("fr-FR")," ?"]}),"nd"===s.num_intervention&&(c=Object(Q.jsxs)("p",{children:[new Date(s.date_programme).toLocaleDateString("fr-FR")," \xe0 08:00:00 ?"]}))),e=i?Object(Q.jsxs)("div",{className:"header-agenda",children:[Object(Q.jsx)("p",{children:" Agenda  "}),c,s.num_intervention&&this.props.setSelectedDate&&Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("button",{onClick:this.setFreeDate,children:" OK "}),Object(Q.jsx)("button",{onClick:function(){return t.setSelectedInterv({})},children:" Annuler "})]}),Object(Q.jsx)("button",{onClick:this.props.close,children:" x "})]}):Object(Q.jsxs)("div",{className:"header-agenda",children:[c,s.num_intervention&&this.props.setSelectedDate&&Object(Q.jsxs)("div",{children:[Object(Q.jsx)("button",{onClick:this.setFreeDate,children:" OK "}),Object(Q.jsx)("button",{onClick:function(){return t.setSelectedInterv({})},children:" Annuler "})]})]}),Object(Q.jsxs)("div",{className:"agenda",children:[e,Object(Q.jsx)("div",{className:"main-agenda",children:r})]})}}]),n}(o.Component);function le(e){var t=e.date,n=e.listInterv,o=e.selectedInterv,s=n.map((function(t){var n;new Date(t.date_programme).getHours();return o.num_intervention===t.num_intervention&&(n={background:"blue",color:"white"}),Object(Q.jsx)("div",{className:"interv-agendaDay",style:n,onClick:function(){return function(t){t.num_intervention===o.num_intervention?e.setSelectedInterv({}):e.setSelectedInterv(t)}(t)},children:Object(Q.jsx)(ce,{intervention:t,showSub:e.showSub})},t.num_intervention)}));return Object(Q.jsxs)("div",{className:"agendaDay",onClick:function(){return function(t){if(n.length<1){console.log("chooseDay",t);var o=t.split("/"),s=Object(ee.a)(o,3),i=s[0],r=s[1],c=s[2];console.log("chooseDay",t,i,r,c);var a=new Date("".concat(c,"-").concat(r,"-").concat(i)).setHours(7,0,0);console.log("dayAt8",a);var l={num_intervention:"nd",libelle_intervention_type:"",date_programme:new Date(a)};e.setSelectedInterv(l)}}(t)},children:[Object(Q.jsxs)("p",{children:[" ",t," : ",n.length," intervention",n.length>1?"s":""," "]}),Object(Q.jsx)("div",{className:"listInterv-agendaDay",children:s})]})}n(371);var ue=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).close=function(){o.setState({showIndic:!1,indication:"",libelle:"",code:""}),o.props.close()},o.updateLibelle=function(e){console.log("updateLibelle ",e.target.value),o.setState({libelle:e.target.value})},o.updateCode=function(e){console.log("updateCode ",e.target.value),o.setState({code:e.target.value})},o.create=function(){console.log("create intervention type");var e=o.state,t=e.libelle,n=e.code;o.state.libelle&&o.state.code?(o.props.socket.emit("create intervention_type",t,n,o.component),o.setState({indication:"...",showIndic:!0})):o.setState({indication:"Veuillez remplir tout les champs",showIndic:!0})},o.state={showIndic:!1,indication:"",libelle:"",code:""},o.component="interventionTypeCreator",o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("interventionTypeCreator mounted"),this.props.socket.on("new intervention_type -"+this.component,(function(t){console.log("new intervention_type"),e.setState({indication:"Type intervention : ".concat(t.libelle_intervention_type," cr\xe9\xe9."),libelle:"",code:""})}))}},{key:"componentWillUnmount",value:function(){console.log("interventionTypeCreator unmount"),this.props.socket.off("new intervention_type -"+this.component)}},{key:"render",value:function(){var e,t=this.state,n=t.showIndic,o=t.libelle,s=t.code,i=t.indication;return n&&(e={display:"flex"}),Object(Q.jsxs)("div",{className:"interventionTypeCreator",children:[Object(Q.jsxs)("div",{className:"top",children:[Object(Q.jsxs)("p",{children:[" ","Cr\xe9er un type d'intervention"," "]}),Object(Q.jsx)("button",{onClick:this.close,children:" x "})]}),Object(Q.jsxs)("div",{className:"main",children:[Object(Q.jsx)("input",{type:"text",required:!0,placeholder:"libelle",value:o,onChange:this.updateLibelle}),Object(Q.jsx)("input",{type:"text",required:!0,placeholder:"code",value:s,onChange:this.updateCode}),Object(Q.jsx)("button",{className:"myButton",onClick:this.create,children:" Creer "}),Object(Q.jsx)("div",{className:"indic",style:e,children:Object(Q.jsxs)("p",{children:[" ",i," "]})})]})]})}}]),n}(o.Component),de=(n(372),function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).close=function(){o.setState({showIndic:!1,indication:"",libelle:""}),o.props.close()},o.updateLibelle=function(e){console.log("updateLibelle ",e.target.value),o.setState({libelle:e.target.value})},o.create=function(){console.log("create probleme_tech_type");var e=o.state.libelle;o.state.libelle?(o.props.socket.emit("create probleme_tech_type",e,o.component),o.setState({indication:"...",showIndic:!0})):o.setState({indication:"Veuillez remplir tout les champs",showIndic:!0})},o.state={showIndic:!1,indication:"",libelle:""},o.component="problemeTechTypeCreator",o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("problemeTechTypeCreator mounted"),this.props.socket.on("new probleme_tech_type -"+this.component,(function(t){console.log("new probleme_tech_type"),e.setState({indication:"Type intervention : ".concat(t.libelle_probleme_tech_type," cr\xe9\xe9."),libelle:""})}))}},{key:"componentWillUnmount",value:function(){console.log("problemeTechTypeCreator unmount"),this.props.socket.off("new probleme_tech_type -"+this.component)}},{key:"render",value:function(){var e,t=this.state,n=t.showIndic,o=t.libelle,s=t.indication;return n&&(e={display:"flex"}),Object(Q.jsxs)("div",{className:"problemeTechTypeCreator",children:[Object(Q.jsxs)("div",{className:"top",children:[Object(Q.jsxs)("p",{children:[" ","Cr\xe9er un type de probleme"," "]}),Object(Q.jsx)("button",{onClick:this.close,children:" x "})]}),Object(Q.jsxs)("div",{className:"main",children:[Object(Q.jsx)("input",{type:"text",required:!0,placeholder:"libelle",value:o,onChange:this.updateLibelle}),Object(Q.jsx)("button",{className:"myButton",onClick:this.create,children:" Creer "}),Object(Q.jsx)("div",{className:"indic",style:e,children:Object(Q.jsxs)("p",{children:[" ",s," "]})})]})]})}}]),n}(o.Component)),pe=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var s;Object(d.a)(this,n),(s=t.call(this,e)).updateTypeIntervention=function(e){console.log("update type intervention",e.target.value);var t=e.target.value;s.setState({selectedNumInterventionType:t})},s.updateDateProgramme=function(e){console.log("updateDateProgramme ",new Date(e.target.value));var t=new Date(e.target.value);s.setState({dateProgramme:t,dateProgrammeDisplay:e.target.value})},s.updateLieu=function(e,t){console.log("update lieu",e.target.value),console.log(t);var n=e.target.value;s.setState({selectedNumLieu:n})},s.updateMaterielType=function(e){console.log("updateMaterielType",e.target.value),console.log("this.materiel",s.materiels),s.setState({selectedMaterielType:e.target.value,materielList:s.materiels[e.target.value]})},s.updateMateriel=function(e){console.log("updateMateriel",e.target.value),s.setState({selectedNumMateriel:e.target.value})},s.updateMotif=function(e){console.log("update motif",e.target.value),s.setState({motif:e.target.value})},s.updateProbleme=function(e,t){console.log("update probleme",e.target.value),console.log(s.problemeTechTypes);var n,o,i=s.problemeTechTypes[e.target.value],r=t||s.state.selectedNumLieu;n=s.lieus[r],o=i?"Resoudre probleme : ".concat(i," -- ").concat(n):s.state.motif,console.log("motif",o),s.setState({motif:o,selectedNumProblemeTechType:e.target.value||"",selectedNumLieu:r})},s.updateCommentaire=function(e){console.log("updateCommentaire",e.target.value),s.setState({commentaire:e.target.value})},s.createIntervention=function(){var e=s.state,t=e.selectedNumInterventionType,n=e.dateProgramme,o=e.selectedNumLieu,i=e.selectedNumProblemeTechType,r=e.selectedNumMateriel,c=e.motif,a=e.num_intervention_pere,l=e.commentaire;"nd"===r&&(r=""),t&&o&&n?(console.log("create intervention : ",t,"",o,n,c,r,i,a),s.props.socket.emit("create intervention",t,"",o,n,c,r,i,a,l),s.setState({message:"intervention Creer lance"})):s.setState({message:"selectionner un type d'intervention, un lieu et une date programm\xe9e"})},s.closePopUp=function(e){e.current.style.top="-1000px"},s.showPopUp=function(e){e.current.style.top="10px"};var i=(new Date).getHours()+1;return s.state={interventionTypeList:[],selectedNumInterventionType:"",dateProgramme:new Date((new Date).setHours(i,0,0)).toISOString(),dateProgrammeDisplay:new Date((new Date).setHours(i+3,0,0,0)).toISOString().replace("Z",""),lieuList:[],selectedNumLieu:"",materielList:[],selectedNumMateriel:"",materielTypes:[],selectedMaterielType:"",motif:"ND",problemeList:[],selectedNumProblemeTechType:"",message:"",num_intervention_pere:"",commentaire:""},s.materiels=null,s.lieus=null,s.problemeTechTypes=null,s.agendaPop=Object(o.createRef)(),s.intervTypeCreator=Object(o.createRef)(),s.problemeTechTypeCreator=Object(o.createRef)(),s}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;if(console.log("createIntervention did mount"),this.props.socket.emit("get intervention definition"),this.props.socket.on("intervention_type list -createIntervention",(function(t){console.log(" intervention_types ",t);var n=t.map((function(e){return{key:e.num_intervention_type,value:e.num_intervention_type,libelle:e.libelle_intervention_type}})),o=n[0].key;e.props.location.state&&e.props.location.state.num_intervention_type&&(o=e.props.location.state.num_intervention_type),e.setState({interventionTypeList:n,selectedNumInterventionType:o})})),this.props.socket.on("lieu list -createIntervention",(function(t){console.log("lieus",t);var n,o=Object(q.a)(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;e.lieus=Object(c.a)(Object(c.a)({},e.lieus),{},Object(J.a)({},s.num_lieu,[s.libelle]))}}catch(r){o.e(r)}finally{o.f()}var i=t.map((function(e){return{key:e.num_lieu,value:e.num_lieu,libelle:e.libelle}}));e.setState({lieuList:i,selectedNumLieu:i[0].value})})),this.props.socket.on("materiel list -createIntervention",(function(t,n,o){var s;console.log("materiels",t);var i,r=Object(q.a)(n);try{var a=function(){var e=i.value;s=Object(c.a)(Object(c.a)({},s),{},Object(J.a)({},e.libelle_materiel_type,t.filter((function(t){return t.num_materiel_type===e.num_materiel_type})).map((function(e){return{key:e.num_materiel,value:e.num_materiel,libelle:e.libelle_materiel}}))))};for(r.s();!(i=r.n()).done;)a()}catch(l){r.e(l)}finally{r.f()}s=Object(c.a)(Object(c.a)({},s),{},Object(J.a)({},"nd",[{key:"nd",value:"nd",libelle:"nd"}])),(n=n.map((function(e){return e.libelle_materiel_type}))).unshift("nd"),console.log("materielsList",s,n),e.materiels=s,e.setState({materielTypes:n,selectedMaterielType:n[0],materielList:s[n[0]]})})),this.props.socket.on("probleme_tech_type list -createIntervention",(function(t){console.log("probleme_tech_types",t);var n,o=Object(q.a)(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;e.problemeTechTypes=Object(c.a)(Object(c.a)({},e.problemeTechTypes),{},Object(J.a)({},s.num_probleme_tech_type,s.libelle_probleme_tech_type))}}catch(r){o.e(r)}finally{o.f()}var i=t.map((function(e){return{key:e.num_probleme_tech_type,value:e.num_probleme_tech_type,libelle:e.libelle_probleme_tech_type}}));e.setState({problemeList:i})})),this.props.socket.on("new intervention -createIntervention",(function(t){var n=t.num_intervention;console.log("new intervention createIntervention"),e.setState({message:"Intervention ".concat(n," cr\xe9\xe9e.")})})),this.props.socket.on("new intervention_type -createIntervention",(function(){console.log("new intervention_type -createIntervention"),e.props.socket.emit("get intervention definition")})),this.props.socket.on("new probleme_tech_type -createIntervention",(function(){console.log("new problem_tech_type -createIntervention"),e.props.socket.emit("get intervention definition")})),this.props.location.state){var t=this.props.location.state,n=(t.num_intervention_pere,t.num_intervention_type,t.dateFree);n&&this.updateDateProgramme(n),this.setState({num_intervention_pere:this.props.location.state.num_intervention_pere,selectedNumInterventionType:this.props.location.state.num_intervention_type})}}},{key:"componentWillUnmount",value:function(){this.props.socket.off("intervention_type list -createIntervention"),this.props.socket.off("lieu list -createIntervention"),this.props.socket.off("materiel list -createIntervention"),this.props.socket.off("probleme_tech_type list -createIntervention"),this.props.socket.off("new intervention_type -createIntervention"),this.props.socket.off("new intervention -createIntervention")}},{key:"render",value:function(){var e=this,t=this.state,n=t.interventionTypeList,o=t.selectedNumInterventionType,s=t.lieuList,i=t.selectedNumLieu,r=(t.materielList,t.selectedNumMateriel),c=(t.materielTypes,t.selectedMaterielType,t.motif),a=t.selectedNumProblemeTechType,l=t.problemeList,u=t.message,d=t.num_intervention_pere,p=t.commentaire,m=(new Date).setHours(3,0,0),A=m+6048e5;return Object(Q.jsxs)("div",{className:"createIntervention",children:[Object(Q.jsx)("div",{className:"notif_pop agenda-createIntervention",ref:this.agendaPop,children:Object(Q.jsx)(ae,{socket:this.props.socket,date_debut:new Date(m),date_fin:new Date(A),session:this.props.session,showSub:this.props.showSub,showHeader:!0,setSelectedDate:this.updateDateProgramme,close:function(){return e.closePopUp(e.agendaPop)}})}),Object(Q.jsx)("div",{className:"notif_pop agenda-createIntervention",ref:this.intervTypeCreator,children:Object(Q.jsx)(ue,{socket:this.props.socket,close:function(){return e.closePopUp(e.intervTypeCreator)}})}),Object(Q.jsx)("div",{className:"notif_pop agenda-createIntervention",ref:this.problemeTechTypeCreator,children:Object(Q.jsx)(de,{socket:this.props.socket,close:function(){return e.closePopUp(e.problemeTechTypeCreator)}})}),Object(Q.jsx)("p",{children:" Cr\xe9er une intervention :"}),d&&Object(Q.jsxs)("p",{children:[" Suite de l'intervention : ",d," "]}),Object(Q.jsxs)("div",{className:"scroll-option",children:[Object(Q.jsxs)(M,{title:"Intervention",folded:!1,children:[Object(Q.jsxs)("div",{className:"sub-category-option",children:[Object(Q.jsx)("label",{children:" Type Intervention :"}),Object(Q.jsx)($,{value:o,objArray:n,onChange:this.updateTypeIntervention}),Object(Q.jsx)("button",{onClick:function(){return e.showPopUp(e.intervTypeCreator)},children:" Creer "})]}),Object(Q.jsxs)("div",{className:"sub-category-option",children:[Object(Q.jsx)("label",{children:" Date programm\xe9e :"}),Object(Q.jsx)("button",{onClick:function(){return e.showPopUp(e.agendaPop)},children:" Agenda "}),Object(Q.jsx)("input",{type:"datetime-local",value:this.state.dateProgrammeDisplay,onChange:this.updateDateProgramme})]}),Object(Q.jsxs)("div",{className:"sub-category-option",children:[Object(Q.jsx)("label",{children:" Lieu :"}),Object(Q.jsx)($,{value:i,objArray:s,onChange:function(t){e.updateProbleme({target:{value:a}},t.target.value)}})]}),Object(Q.jsxs)("div",{className:"sub-category-option",children:[Object(Q.jsx)("label",{children:" Commentaire :"}),Object(Q.jsx)("textarea",{value:p,onChange:this.updateCommentaire})]})]}),Object(Q.jsx)(M,{title:"Objet de l'intervention",folded:!0,children:Object(Q.jsx)(ne,{socket:this.props.socket,onChange:function(t){return e.updateMateriel({target:{value:t.num}})},selectedLieu:"nd",selectedNumMateriel:r})}),Object(Q.jsxs)(M,{title:"Motif",folded:!0,children:[Object(Q.jsxs)("div",{className:"sub-category-option",children:[Object(Q.jsx)("label",{children:" Motif :"}),Object(Q.jsx)("textarea",{value:c,onChange:this.updateMotif})]}),Object(Q.jsxs)(M,{title:"Probleme",folded:!0,children:[Object(Q.jsxs)("div",{className:"sub-category-option",children:[Object(Q.jsx)("label",{children:" Type du probleme:"}),Object(Q.jsx)($,{value:a,objArray:l,onChange:this.updateProbleme}),Object(Q.jsx)("button",{onClick:function(){return e.showPopUp(e.problemeTechTypeCreator)},children:" Cr\xe9er "})]}),Object(Q.jsxs)("div",{className:"sub-category-option",children:[Object(Q.jsx)("label",{children:" Lieu :"}),Object(Q.jsx)($,{value:i,objArray:s,onChange:function(t){e.updateProbleme({target:{value:a}},t.target.value)}})]})]})]})]}),Object(Q.jsx)("button",{onClick:this.createIntervention,children:" Planifier "}),Object(Q.jsxs)("p",{children:[" ",u," "]})]})}}]),n}(o.Component),me=(n(373),n(374),function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).updateSelectedNumUser=function(e){console.log("updateSelectedNumUser",e),o.props.setSelectedUser(e)},o.state={connectedList:[],allUserList:[]},o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("ActiveUsers mounted"),this.props.socket.emit("get tech_mains list"),this.props.socket.emit("get list tech_main connected"),this.props.socket.on("tech_mains list -activeUsers",(function(t){console.log("tech_mains list -activeUsers",t),t.sort((function(t,n){return t.num_user===e.props.session.num_user?-1:1})),e.setState({allUserList:t})})),this.props.socket.on("tech_main connected list -activeUsers",(function(t){console.log("tech_main connected list -activeUsers",t),e.setState({connectedList:t});var n=Object(c.a)({},e.props.selectedUser);n.active=t.includes(e.props.selectedUser.num_user),e.updateSelectedNumUser(n)})),this.props.socket.on("new message -activeUsers",(function(t){console.log("new message -activeUsers"),e.props.socket.emit("get tech_mains list")}))}},{key:"componentWillUnmount",value:function(){console.log("ActiveUsers unmounted"),this.props.socket.off("tech_mains list -activeUsers"),this.props.socket.off("tech_main connected list -activeUsers")}},{key:"render",value:function(){var e=this,t=this.state,n=t.allUserList,o=t.connectedList,s=this.props,i=s.session,r=s.selectedUser,c=n.map((function(t){var n=o.includes(t.num_user),s=t.num_user===r.num_user;return t.active=n,console.log(t.username,n),Object(Q.jsx)(Ae,{isSelf:i.num_user===t.num_user,username:t.username,nbNewMessage:t.nbNewMessage,active:t.active,selected:s,onClick:function(){return e.updateSelectedNumUser(t)}},t.num_user)}));return Object(Q.jsx)("div",{className:"activeUsers",children:Object(Q.jsx)("div",{className:"scroll_list",children:c})})}}]),n}(o.Component));function Ae(e){var t,n,o=e.username,s=e.active,i=e.selected,r=e.isSelf,c=e.nbNewMessage;return t=i?{borderBottom:"1px solid red",background:"white"}:{},n=s?{borderRight:"5px solid green"}:{borderRight:"5px solid red"},Object(Q.jsx)("div",{className:"userListItem",style:t,children:Object(Q.jsxs)("p",{onClick:e.onClick,style:n,children:[o," ",c>0?"(".concat(c,")"):"",r?"(moi)":""," ",Object(Q.jsx)("span",{className:"statut-userListItem",children:s?"connect\xe9":"non-connect\xe9"})]})})}n(375);var he=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).state={listUndoneIntervention:[],listPendingIntervention:[],listDoneTodayIntervention:[]},o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("TechActivityDisplay mounted"),this.props.socket.emit("get undone intervention",this.props.tech.num_user),this.props.socket.emit("get pending intervention",this.props.tech.num_user),this.props.socket.emit("get done today intervention",this.props.tech.num_user),this.props.socket.on("list undone intervention -techActivityDisplay",(function(t){console.log("list undone intervnetion -techActivityDisplay",t);var n=t.map((function(e,t){return{num_intervention:e.num_intervention,num_intervention_pere:e.num_intervention_pere,date_programme:e.date_programme,libelle_lieu:e.libelle,libelle_intervention_type:e.libelle_intervention_type,tech_main_username:e.username,motif:e.motif,numero:t+1,done:e.done,probleme_resolu:e.probleme_resolu,libelle_probleme_tech_type:e.libelle_probleme_tech_type,code_intervention_type:e.code_intervention_type,children:e.children,commentaire:e.commentaire}}));e.setState({listUndoneIntervention:n})})),this.props.socket.on("pending intervention -techActivityDisplay",(function(t){console.log("pending intervention -techActivityDisplay",t);var n=t.map((function(e,t){return{num_intervention:e.num_intervention,num_intervention_pere:e.num_intervention_pere,date_programme:e.date_programme,libelle_lieu:e.libelle,libelle_intervention_type:e.libelle_intervention_type,tech_main_username:e.username,motif:e.motif,numero:t+1,done:e.done,probleme_resolu:e.probleme_resolu,libelle_probleme_tech_type:e.libelle_probleme_tech_type,code_intervention_type:e.code_intervention_type,children:e.children,commentaire:e.commentaire}}));e.setState({listPendingIntervention:n})})),this.props.socket.on("done today intervention -techActivityDisplay",(function(t){console.log("done today intervention -techActivityDisplay",t);var n=t.map((function(e,t){return{num_intervention:e.num_intervention,num_intervention_pere:e.num_intervention_pere,date_programme:e.date_programme,libelle_lieu:e.libelle,libelle_intervention_type:e.libelle_intervention_type,tech_main_username:e.username,motif:e.motif,numero:t+1,done:e.done,probleme_resolu:e.probleme_resolu,libelle_probleme_tech_type:e.libelle_probleme_tech_type,code_intervention_type:e.code_intervention_type,children:e.children,commentaire:e.commentaire}}));e.setState({listDoneTodayIntervention:n})})),this.props.socket.on("ended intervention -techActivity",(function(){e.props.socket.emit("get undone intervention",e.props.tech.num_user),e.props.socket.emit("get pending intervention",e.props.tech.num_user),e.props.socket.emit("get done today intervention",e.props.tech.num_user)})),this.props.socket.on("started intervention -techActivity",(function(){e.props.socket.emit("get undone intervention",e.props.tech.num_user),e.props.socket.emit("get pending intervention",e.props.tech.num_user),e.props.socket.emit("get done today intervention",e.props.tech.num_user)}))}},{key:"componentDidUpdate",value:function(e,t){console.log("TechActivityDisplay update"),e.tech.num_user!==this.props.tech.num_user&&(this.props.socket.emit("get undone intervention",this.props.tech.num_user),this.props.socket.emit("get pending intervention",this.props.tech.num_user),this.props.socket.emit("get done today intervention",this.props.tech.num_user))}},{key:"componentWillUnmount",value:function(){console.log("TechActivityDisplay unmount"),this.props.socket.off("list undone intervention -techActivityDisplay"),this.props.socket.off("pending intervention -techActivityDisplay"),this.props.socket.off("done today intervention -techActivityDisplay")}},{key:"render",value:function(){var e,t=this,n=this.state,o=n.listUndoneIntervention,s=n.listPendingIntervention,i=n.listDoneTodayIntervention,r=this.props.tech,c=r.num_user,a=r.username,l="\xe0 faire : ".concat(o.length),u="En cours : ".concat(s.length),d="Termin\xe9e aujourd'hui : ".concat(i.length),p=o.map((function(e){return Object(Q.jsx)(W,{intervention:e,showSub:t.props.showSub},e.num_intervention)})),m=s.map((function(e){return Object(Q.jsx)(W,{intervention:e,showSub:t.props.showSub},e.num_intervention)})),A=i.map((function(e){return Object(Q.jsx)(W,{intervention:e,showSub:t.props.showSub},e.num_intervention)}));return console.log("tech activite",c),e=c?"Activit\xe9s de ".concat(a):"Activit\xe9s",Object(Q.jsxs)("div",{className:"techActivityDisplay",children:[Object(Q.jsxs)("div",{className:"indic",children:[Object(Q.jsx)("p",{children:e}),c&&a&&Object(Q.jsx)("button",{onClick:function(){return t.props.resetUser()},children:"X"})]}),Object(Q.jsx)("div",{className:"main",children:Object(Q.jsxs)("div",{className:"scroll_list",children:[Object(Q.jsx)(M,{title:u,children:Object(Q.jsx)("div",{className:"scroll_list",children:m})}),Object(Q.jsx)(M,{title:l,folded:!0,children:Object(Q.jsx)("div",{className:"scroll_list",children:p})}),Object(Q.jsx)(M,{title:d,folded:!0,children:Object(Q.jsx)("div",{className:"scroll_list",children:A})})]})})]})}}]),n}(o.Component),be=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).updateSelectedUser=function(e){console.log("updateSelectedUser",e),o.setState({selectedUser:e})},o.state={selectedUser:{}},o}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.state.selectedUser;return t.num_user?"Activite de ".concat(t.username):"...",Object(Q.jsxs)("div",{className:"techActivity",children:[Object(Q.jsx)("div",{className:"side",children:Object(Q.jsx)(me,{socket:this.props.socket,session:this.props.session,selectedUser:t,setSelectedUser:this.updateSelectedUser})}),Object(Q.jsx)("div",{className:"main",children:Object(Q.jsx)(he,{tech:t,socket:this.props.socket,resetUser:function(){return e.updateSelectedUser({})},showSub:this.props.showSub})})]})}}]),n}(o.Component),fe=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).nbInterventionUndonePlus=function(e){console.log("nbInterventionUndonePlus",e);var t=e;t=parseInt(t),o.setState({nbInterventionUndone:t})},o.nbNewNotificationPlus=function(e){console.log("nbNewNotificationPlus",e);var t=e;t=parseInt(t),o.setState({nbNewNotification:t})},o.componentDidMount=function(){console.log("DASHBOARD did mount"),o.props.socket.emit("get nb intervention undone"),o.props.socket.emit("get nb unanswered notifs"),o.props.socket.on("nb intervention undone",(function(e){console.log("nb intervention undone"),o.setState({nbInterventionUndone:e})})),o.props.socket.on("nb unanswered notifs -dashboard",(function(e){o.setState({nbNewNotification:e})})),o.props.socket.on("new intervention",(function(){console.log("new intervention dashboard"),o.props.socket.emit("get nb intervention undone")})),o.props.socket.on("ended intervention",(function(){console.log(" ended intervention dashboard"),o.props.socket.emit("get nb intervention undone")}))},o.componentWillUnmount=function(){o.props.socket.off("nb intervention undone"),o.props.socket.off("new intervention "),o.props.socket.off("ended intervention"),o.props.socket.off("materiel list"),o.props.socket.off("nb unanswered notifs -dashboard")},o.state={nbInterventionUndone:0,nbNewNotification:0},o}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.props.match,n=t.path,o=t.url;return Object(Q.jsx)("div",{className:"dashboard",children:Object(Q.jsxs)("div",{className:"main-dashboard",style:undefined,children:[Object(Q.jsxs)("nav",{id:"nav_dashboard",children:[Object(Q.jsxs)(S.c,{activeClassName:"active_navLink_dashboard",to:"".concat(o,"/toDo"),children:[" Interventions a faire ",this.state.nbInterventionUndone>0?"(".concat(this.state.nbInterventionUndone,")"):""," "]}),Object(Q.jsx)(S.c,{activeClassName:"active_navLink_dashboard",to:"".concat(o,"/tech_activity"),children:" Activit\xe9es "}),Object(Q.jsx)(S.c,{activeClassName:"active_navLink_dashboard",to:"".concat(o,"/creer"),children:" Creer "})]}),Object(Q.jsx)("div",{id:"display_dashboard",children:Object(Q.jsxs)(D.d,{children:[Object(Q.jsx)(D.a,{exact:!0,from:n,to:"".concat(n,"/toDo")}),Object(Q.jsx)(D.b,{path:"".concat(n,"/toDo"),render:function(t){return Object(Q.jsx)(G,Object(c.a)(Object(c.a)({setNbInterventionUndone:e.nbInterventionUndonePlus},t),e.props))}}),Object(Q.jsx)(D.b,{path:"".concat(n,"/tech_activity"),render:function(t){return Object(Q.jsx)(be,Object(c.a)(Object(c.a)({},t),{},{socket:e.props.socket,session:e.props.session,showSub:e.props.showSub}))}}),Object(Q.jsx)(D.b,{path:"".concat(n,"/notifs"),render:function(t){return Object(Q.jsx)(K,Object(c.a)(Object(c.a)(Object(c.a)({},t),e.props),{},{setNbNewNotif:e.nbNewNotificationPlus}))}}),Object(Q.jsx)(D.b,{path:"".concat(n,"/creer"),render:function(t){return Object(Q.jsx)(pe,Object(c.a)(Object(c.a)({},t),e.props))}})]})})]})})}}]),n}(s.a.Component),ge=(n(376),n(377),function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).showDetails=function(){o.setState({detailsAreShown:!o.state.detailsAreShown})},o.state={detailsAreShown:!1},o}return Object(p.a)(n,[{key:"render",value:function(){var e,t,n,o;switch(this.props.notif.statut_code){case Y.code:e={borderLeft:"13px solid red"},n={color:"red",fontWeight:"bold"};break;case X.code:e={borderLeft:"13px solid yellow"},n={color:"yellow",fontWeight:"bold"};break;case V.code:e={borderLeft:"13px solid blue"},n={color:"blue"}}return this.state.detailsAreShown&&(o={height:"80%"},t={height:"15%"},e=Object(c.a)(Object(c.a)({},e),{},{height:"300px"})),this.props.notif.num_app_user_tech_main&&this.props.notif.date_reponse&&(e=Object(c.a)(Object(c.a)({},e),{},{background:"#a9c8f7"})),Object(Q.jsxs)("div",{className:"notif_history",style:e,children:[Object(Q.jsxs)("div",{className:"notif_history-sum",style:t,children:[Object(Q.jsxs)("div",{className:"probleme_type",children:[Object(Q.jsxs)("p",{children:[" ",this.props.notif.probleme_type," "]}),Object(Q.jsxs)("p",{children:[" ",this.props.notif.code," "]})]}),Object(Q.jsxs)("div",{className:"probleme_statut",style:n,children:[Object(Q.jsxs)("p",{children:[" ",this.props.notif.statut_libelle," "]}),Object(Q.jsxs)("p",{children:[" ",this.props.notif.lieu," "]})]}),Object(Q.jsx)("div",{className:"user_sender_username",children:Object(Q.jsxs)("p",{children:[" par : ",this.props.notif.user_sender_username," "]})}),Object(Q.jsxs)("div",{className:"date_envoie",children:[Object(Q.jsx)("p",{children:" Date d'envoie : "}),Object(Q.jsxs)("p",{children:[" ",this.props.notif.date_envoie," "]})]}),Object(Q.jsx)("button",{className:"myButton",onClick:this.showDetails,children:" Details "})]}),this.state.detailsAreShown&&Object(Q.jsxs)("div",{className:"notif-details",style:o,children:[Object(Q.jsxs)("p",{children:[" remarque: ",this.props.notif.remarque," "]}),Object(Q.jsxs)("p",{children:[" envoyee par : ",this.props.notif.user_sender_username," "]}),Object(Q.jsxs)("p",{children:[" prise en charge par : ",this.props.notif.tech_main_username,"  "]}),Object(Q.jsxs)("p",{children:[" repondue le : ",this.props.notif.date_reponse," "]}),Object(Q.jsxs)("p",{children:[" ID notification : ",this.props.notif.num_notification," "]})]})]})}}]),n}(s.a.Component)),je=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).componentDidMount=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(" NOTIFSHISTORY did mount "),o.props.socket.emit("get notifs history"),o.props.socket.on("notifs history",(function(e){console.log("notification history for tech_main",e);var t=e.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{statut_code:e.statut,statut_libelle:e.statut_libelle,remarque:e.remarque||"-",date_envoie:new Date(e.date_envoie).toLocaleString("fr-FR"),tech_main_username:e.tech_main_username||"-",date_reponse:e.date_reponse?new Date(e.date_reponse).toLocaleString("fr-FR"):"-"})}));console.log("newNotifsTab",t),o.setState({notifsTab:t})})),o.props.socket.emit("get users list"),o.props.socket.on("users list",(function(e){console.log("users list",e),e.push({num_user:0,username:"all"}),o.setState({usersList:e})}));case 5:case"end":return e.stop()}}),e)}))),o.componentDidUpdate=function(){console.log("NOTIFSHISTORY update")},o.updateSelectedUser=function(e){"all"!==e.target.value?o.props.socket.emit("get notifs history",e.target.value):o.props.socket.emit("get notifs history"),o.setState({selectedUser:e.target.value})},o.componentWillUnmount=function(){o.props.socket.off("notifs history"),o.props.socket.off("users list")},o.showNotifs=function(e){return e.map((function(e){return Object(Q.jsx)(ge,{notif:e},e.num_notification)}))},o.state={notifsTab:[],usersList:[],selectedUser:"all"},o}return Object(p.a)(n,[{key:"render",value:function(){var e=this.state.usersList.map((function(e){return{key:e.num_user,value:e.num_user,libelle:e.username}}));return Object(Q.jsxs)("div",{className:"notifsHistory",children:[Object(Q.jsxs)("div",{className:"notifsHistory-select",children:[Object(Q.jsx)("p",{children:" Historiques des notifications envoyer par :"}),Object(Q.jsx)($,{objArray:e,value:this.state.selectedUser,onChange:this.updateSelectedUser})]}),Object(Q.jsx)("div",{className:"notifsHistory-list",children:this.showNotifs(this.state.notifsTab)})]})}}]),n}(s.a.Component),ve=(n(378),n(379),function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).state={problemeTechTypeArray:[],lieuArray:[]},o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("probleme constate mounted"),this.props.socket.emit("get probleme_tech_type list"),this.props.socket.emit("get lieu list"),this.props.socket.on("probleme_tech_type list -problemeTechConstate",(function(t){console.log("probleme_tech_types list",t);var n=t.map((function(e){return{key:e.num_probleme_tech_type,value:e.num_probleme_tech_type,libelle:e.libelle_probleme_tech_type}}));n.unshift({key:"nd",value:"nd",libelle:"nd"}),e.setState({problemeTechTypeArray:n})})),this.props.socket.on("lieu list -problemeTechConstate",(function(t){console.log("lieus",t);var n=t.map((function(e){return{key:e.num_lieu,value:e.num_lieu,libelle:e.libelle}}));n.unshift({key:"nd",value:"nd",libelle:"nd"}),e.setState({lieuArray:n})}))}},{key:"componentWillUnmount",value:function(){console.log("ProblemeTechConstate unmount"),this.props.socket.off("probleme_tech_type list -problemeTechConstate"),this.props.socket.off("lieu list -problemeTechConstate")}},{key:"render",value:function(){var e=this.props,t=e.numProblemeTechType,n=e.numLieu,o=e.remarque,s=e.onChangeProblemeTechType,i=e.onChangeLieu,r=e.onChangeRemarque,c=this.state,a=c.problemeTechTypeArray,l=c.lieuArray;return Object(Q.jsx)("div",{className:"problemeTechConstate",children:Object(Q.jsxs)(M,{title:"Probleme constat\xe9",folded:!0,children:[Object(Q.jsx)(te,{objArray:a,value:t,onChange:s}),Object(Q.jsx)(te,{objArray:l,value:n,onChange:i}),Object(Q.jsx)("textarea",{placeholder:"Remarque",value:o,onChange:r})]})})}}]),n}(o.Component));n(380);function Oe(e){var t=e.log?e.log.split(";"):[""];function n(n,o){if(n.preventDefault(),o>t.length)for(var s=0,i=o-t.length;s<i;s++)t.push("");else o<t.length&&(t.length=o);e.updateLog(t.join(";"))}console.log("etapes before render",t);var o=t.map((function(n,o){return Object(Q.jsx)("input",{value:n,placeholder:"etape #".concat(o+1),onChange:function(n){return function(n,o){console.log("change Etapes",o);var s=t.slice();s[o]=n,e.updateLog(s.join(";"))}(n.target.value,o)}},o)}));return Object(Q.jsx)("div",{className:"interventionLog",children:Object(Q.jsx)(M,{title:"Log",folded:!0,children:Object(Q.jsxs)("form",{onSubmit:function(e){return n(e,t.length+1)},children:[o,Object(Q.jsx)("button",{onClick:function(e){return n(e,t.length+1)},children:" + "}),Object(Q.jsx)("button",{onClick:function(e){return n(e,t.length-1)},children:" - "})]})})})}var xe=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).updateMateriel=function(e){o.setState({materiels:e})},o.updateProblemeTechType=function(e){var t=e.target.value;o.setState({selectedNumProblemeTechType:t})},o.updateLieu=function(e){var t=e.target.value;o.setState({selectedNumLieu:t})},o.updateRemarque=function(e){var t=e.target.value;o.setState({remarque:t})},o.updateLog=function(e){o.setState({log:e})},o.updatePwd=function(e){var t=e.target.value;o.setState({pwd:t})},o.authenticate=function(e){e.preventDefault();var t=o.state.pwd;t&&o.props.socket.emit("authenticate intervention tech_main",o.state.num_intervention,t)},o.startIntervention=function(){var e=o.state.intervention.num_intervention;console.log("start intervention"),o.state.techMainIsAuth&&o.props.socket.emit("start intervention",e)},o.endIntervention=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=o.state.intervention,n=t.num_intervention,s=t.date_debut;s||console.log("pas de date de debut mais on va termin\xe9"),console.log("resolu",e),console.log("end intervention"),o.state.techMainIsAuth&&o.props.socket.emit("end intervention",n,e,s)},o.updateIntervention=function(){var e=o.state.intervention.num_intervention,t=o.state,n=t.log,s=t.selectedNumProblemeTechType,i=t.selectedNumLieu,r=t.remarque,c=t.num_decharge,a=t.materiels;console.log("updateIntervention",e,n,s,i);if(e){if(n&&(console.log("emit udpdate intervention info log"),o.props.socket.emit("update intervention info log",e,n)),"nd"!==s&&"nd"!==i){console.log("emit update intervention info probleme_tech");var l={num_probleme_tech_type:s,num_lieu:i,remarque:r};o.props.socket.emit("update intervention info probleme_tech",e,l)}c&&(console.log("emit update decharge intervention"),o.props.socket.emit("update decharge intervention",c,e)),a.length>0&&!(a.filter((function(e){return"nd"===e.num})).length>0)&&(console.log("emit update intervention info num_materiel"),o.props.socket.emit("update intervention info num_materiel",e,a[0].num))}},o.openCreateIntervention=function(){o.props.closeSub();var e={num_intervention_pere:o.state.num_intervention,num_intervention_type:"a768355e-3cd2-497c-b579-d4e184b61298"};o.props.history.push("/acim/creer",e)},o.getDecharge=function(e){var t=new URL(document.location.href),n="/pdf/acim/decharge/".concat(e);t.port=3500,t.pathname=n,console.log("s_URL",t),window.open(t,"_blank")},o.getDechargeDoc=function(e){var t=new URL(document.location.href),n="/docx/acim/decharge/".concat(e);t.port=3500,t.pathname=n,console.log("s_URL",t),window.open(t,"_blank")},o.state={techMainIsAuth:!1,num_intervention:o.props.num_intervention,intervention:{},pwd:"",selectedNumProblemeTechType:"nd",selectedNumLieu:"nd",remarque:"",log:"etape1 ; etape2; etape3;",num_decharge:"",materiels:[{num:"nd",type:"nd",lieu:"nd"}]},o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("intervention page mounted"),console.log(this.props.socket),this.props.socket.emit("get intervention data",this.props.num_intervention),this.props.socket.on("intervention data",(function(t){console.log("intervention data",t),e.setState({intervention:t,log:t.log,num_decharge:t.num_decharge})})),this.props.socket.on("tech_main is authenticated",(function(t){t===e.state.num_intervention&&(console.log("tech is auth to true"),e.setState({techMainIsAuth:!0,pwd:""}))})),this.props.socket.on("started intervention",(function(t){console.log("intervention started ",t.num_intervention,t.date_debut),e.state.num_intervention===t.num_intervention&&e.setState({intervention:t})})),this.props.socket.on("ended intervention interventionPage",(function(t){console.log("intervention ended ",t.num_intervention,t.date_debut),e.state.num_intervention===t.num_intervention&&e.setState({intervention:t})})),this.props.socket.on("new decharge",(function(t){var n=t.num_decharge;e.setState({num_decharge:n})}))}},{key:"componentDidUpdate",value:function(){var e;(console.log("intervention page updated",this.props.num_intervention),this.props.num_intervention!==this.state.num_intervention)&&(this.props.socket.emit("get intervention data",this.props.num_intervention),e=this.props.num_intervention?this.state.intervention:{},this.setState({num_intervention:this.props.num_intervention,techMainIsAuth:!1,intervention:e,num_decharge:""}))}},{key:"componentWillUnmount",value:function(){console.log("interventionPage unmount"),this.props.socket.off("intervention data"),this.props.socket.off("tech_main is authenticated"),this.props.socket.off("started intervention"),this.props.socket.off("new decharge")}},{key:"render",value:function(){var e,t,n=this,o=this.state.intervention,s=o.tech_main_username,i=o.libelle_intervention_type,r=o.motif,c=o.libelle_lieu,a=o.date_programme,l=o.date_debut,u=o.date_fin,d=o.done,p=o.probleme_resolu,m=o.libelle_probleme_tech_type,A=o.log,h=o.lieu_probleme_tech,b=o.num_decharge,f=o.num_materiel,g=o.libelle_materiel,j=o.libelle_materiel_type,v=o.children,O=o.num_intervention_pere,x=o.commentaire;A&&(t=(e=A.split(";")).map((function(e,t){return Object(Q.jsx)("li",{children:e},t)})));var I=this.state,E=I.selectedNumProblemeTechType,y=I.selectedNumLieu,C=I.remarque,w=I.log,k=I.num_decharge,_=I.materiels,B=this.props,N=B.style,S=B.closeSub;l&&(l=new Date(l).toLocaleString("fr-FR")),a&&(a=new Date(a).toLocaleString("fr-FR")),u&&(u=new Date(u).toLocaleString("fr-FR"));var L,D,T,R=this.props.num_intervention,P=Object(Q.jsxs)(Q.Fragment,{children:[!l&&Object(Q.jsx)("button",{className:"myButton",onClick:this.startIntervention,children:" Commencer "}),!d&&Object(Q.jsx)("button",{className:"myButton myButton_warning",onClick:function(){return n.endIntervention()},children:" Terminer "}),!p&&Object(Q.jsx)("button",{className:"myButton",onClick:function(){return n.endIntervention(!0)},children:" Termin\xe9 & R\xe9solu "}),!p&&d&&"/acim"===this.props.match.path&&Object(Q.jsx)("button",{className:"myButton",onClick:this.openCreateIntervention,children:" Creer une intervention suite "})]});(console.log("children",v),v&&(D=v.map((function(e){return Object(Q.jsxs)("li",{children:["Intervention #",Object(Q.jsxs)("button",{onClick:function(){return n.props.showSub(e.num_intervention)},children:[" ",e.num_intervention," "]})]},e.num_intervention)}))),this.state.techMainIsAuth)?(T=Object(Q.jsxs)(Q.Fragment,{children:[O&&Object(Q.jsxs)("p",{children:[" ","Suite de l'intervention : ",Object(Q.jsxs)("button",{onClick:function(){return n.props.showSub(O)},children:[" ",O," "]})]}),Object(Q.jsxs)("p",{children:[" Type : ",i," "]}),Object(Q.jsxs)("p",{children:["   -  ",x," "]}),Object(Q.jsxs)("p",{children:[" Motif : ",r," "]}),Object(Q.jsxs)("p",{children:[" Lieu : ",c," "]}),Object(Q.jsxs)("p",{children:[" Faite par : ",s," "]}),Object(Q.jsxs)("p",{children:[" Programme le : ",a," "]}),Object(Q.jsxs)("p",{children:[" Debutee le : ",l," "]}),Object(Q.jsxs)("p",{children:[" Terminee le : ",u," "]}),m&&Object(Q.jsxs)("p",{children:[" Probleme constat\xe9 : ",m," -- ",h," "]}),A&&Object(Q.jsxs)("p",{children:["".concat(e.length>1?"Etapes suivies":"Etape suivie")," :",t]}),b&&Object(Q.jsxs)("p",{children:["ID decharge :",Object(Q.jsxs)("button",{onClick:function(){return n.getDechargeDoc(b)},children:[" ",b," "]})]}),f&&Object(Q.jsxs)("p",{children:["Intervention sur : ",j," -- ",g]}),Object(Q.jsxs)("p",{children:[" Probleme resolue : ",p?"OUI":"NON"," "]}),v.length>0&&Object(Q.jsxs)("p",{children:["Suite : ",D]})]}),L=Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsxs)("div",{className:"intervention-form",children:[Object(Q.jsx)(M,{title:"INFO",children:T}),Object(Q.jsx)("div",{className:"intervention-modifier",children:Object(Q.jsxs)(M,{title:"Modifier",folded:!0,children:[Object(Q.jsx)(ve,{numProblemeTechType:E,numLieu:y,remarque:C,onChangeProblemeTechType:this.updateProblemeTechType,onChangeLieu:this.updateLieu,onChangeRemarque:this.updateRemarque,socket:this.props.socket}),Object(Q.jsx)(Oe,{log:w,updateLog:this.updateLog}),Object(Q.jsx)(oe,{socket:this.props.socket,listMateriel:_,setListMateriel:this.updateMateriel,maxListMaterielLength:1,title:"Objet de l'intervention",folded:!0}),Object(Q.jsx)(ie,{socket:this.props.socket,num_intervention:R,num_decharge:k,downloadDecharge:this.getDecharge,downloadDechargeDoc:this.getDechargeDoc}),Object(Q.jsx)("button",{onClick:this.updateIntervention,children:" Sauvergarder "})]})})]}),Object(Q.jsx)("div",{className:"intervention-control",children:P})]})):L=Object(Q.jsxs)("form",{onSubmit:this.authenticate,className:"pwdForm",children:[Object(Q.jsx)("input",{type:"password",placeholder:"mot de passe de ".concat(s),value:this.state.pwd,className:"pwdInput",onChange:this.updatePwd}),Object(Q.jsx)("button",{onClick:this.authenticate,className:"myButton",children:" Valider "})]});return Object(Q.jsxs)("div",{className:"interventionPage",style:N,children:[Object(Q.jsxs)("div",{className:"interventionPage-title",children:[Object(Q.jsxs)("button",{onClick:S,children:[" ","x"," "]}),Object(Q.jsx)("p",{children:" Intervention "})]}),Object(Q.jsxs)("p",{children:[" ID intervention  : ",R," "]}),Object(Q.jsx)("div",{className:"intervention-display",children:L})]})}}]),n}(s.a.Component);n(381),n(382);function Ie(e){var t="".concat(e.getDate()),n="".concat(e.getMonth()+1),o=e.getFullYear();return n=n.length<2?"0"+n:n,t=t.length<2?"0"+t:t,"".concat(o,"-").concat(n,"-").concat(t)}var Ee=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).updateTechMain=function(e){console.log("updateTechMain",e.target.value),console.log(o.techMains[e.target.value]);var t=o.techMains[e.target.value];o.props.setTechMain({num:e.target.value,username:t})},o.updateDateDebut=function(e){console.log("updateDateDebut",new Date(e.target.value));var t=new Date(new Date(e.target.value).setHours(0,0,0));o.props.setDateDebut(t)},o.updateDateFin=function(e){console.log("updateDateFin",new Date(e.target.value));var t=new Date(new Date(e.target.value).setHours(23,59,59));o.props.setDateFin(t)},o.updateStatut=function(e){console.log("updateStatut",e.target.value);var t=o.statuts[e.target.value];o.props.setStatut(t)},o.updateNumIntervention=function(e){console.log("updateNumIntervention",e.target.value),o.props.setNumIntervention(e.target.value)},o.updateNumInterventionType=function(e){console.log("updateNumInterventionType",e.target.value),o.props.setNumInterventionType(e.target.value)},o.state={tech_mainList:[],statutList:[{key:0,value:0,libelle:"nd"},{key:1,value:1,libelle:"non-effectu\xe9e"},{key:2,value:2,libelle:"effectu\xe9e-r\xe9solue"},{key:3,value:3,libelle:"effectu\xe9e-non-r\xe9solue"}],interventionTypes:[]},o.techMains={},o.statuts={0:{done:"nd",probleme_resolu:"nd"},1:{done:!1,probleme_resolu:!1},2:{done:!0,probleme_resolu:!0},3:{done:!0,probleme_resolu:!1}},o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.socket.emit("get tech_mains list"),this.props.socket.on("tech_mains list",(function(t){console.log("tech_mains list");var n,o=t.map((function(e){return{key:e.num_user,libelle:e.username,value:e.num_user}})),s=Object(q.a)(o);try{for(s.s();!(n=s.n()).done;){var i=n.value;e.techMains=Object(c.a)(Object(c.a)({},e.techMains),{},Object(J.a)({},i.key,i.libelle))}}catch(r){s.e(r)}finally{s.f()}e.techMains=Object(c.a)(Object(c.a)({},e.techMains),{},{nd:"nd"}),o.unshift({key:"nd",libelle:"nd",value:"nd"}),console.log("newTech_mainList",o),e.setState({tech_mainList:o})})),this.props.socket.emit("get intervention type"),this.props.socket.on("intervention_type list -interventionHistoryControl",(function(t){var n=t.map((function(e){return{key:e.num_intervention_type,libelle:e.libelle_intervention_type,value:e.num_intervention_type}}));n.unshift({key:"nd",libelle:"nd",value:"nd"}),e.setState({interventionTypes:n})}))}},{key:"componentWillUnmount",value:function(){console.log("interventionHistoryControl unmount"),this.props.socket.off("tech_mains list"),this.props.socket.off("intervention_type list -interventionHistoryControl")}},{key:"render",value:function(){var e=this.props,t=e.tech_main,n=e.date_debut,o=e.date_fin,s=e.statut,i=e.num_intervention,r=e.num_intervention_type,c=this.state,a=c.tech_mainList,l=c.statutList,u=c.interventionTypes,d=1;return s.done&&(d="nd"===s.done?0:s.probleme_resolu?2:3),Object(Q.jsxs)("div",{className:"interventionHistoryControl",children:[Object(Q.jsxs)("div",{className:"sub-control",children:[Object(Q.jsx)("p",{children:" Technicien : "}),Object(Q.jsx)(te,{value:t.num,onChange:this.updateTechMain,objArray:a})]}),Object(Q.jsxs)("div",{className:"sub-control",children:[Object(Q.jsx)("p",{children:" Programm\xe9 du: "}),Object(Q.jsx)("input",{type:"date",value:Ie(n),onChange:this.updateDateDebut})]}),Object(Q.jsxs)("div",{className:"sub-control",children:[Object(Q.jsx)("p",{children:" au: "}),Object(Q.jsx)("input",{type:"date",value:Ie(o),onChange:this.updateDateFin})]}),Object(Q.jsxs)("div",{className:"sub-control",children:[Object(Q.jsx)("p",{children:" status : "}),Object(Q.jsx)(te,{value:d,onChange:this.updateStatut,objArray:l})]}),Object(Q.jsxs)("div",{className:"sub-control",children:[Object(Q.jsxs)("p",{children:[" ","Type d'intervention :"," "]}),Object(Q.jsx)(te,{value:r,onChange:this.updateNumInterventionType,objArray:u})]}),Object(Q.jsxs)("div",{className:"sub-control",children:[Object(Q.jsx)("p",{children:" ID : "}),Object(Q.jsx)("input",{placeholder:"Recherche par ID",value:i,onChange:this.updateNumIntervention})]})]})}}]),n}(o.Component),ye=(n(383),function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).displayInterventions=function(e){return e.map((function(e){return Object(Q.jsx)(W,{intervention:e,showSub:o.props.showSub},e.num_intervention)}))},o.state={interventions:[]},o}return Object(p.a)(n,[{key:"render",value:function(){var e,t,n,o=this.props,s=o.tech_main_username,i=o.statut,r=o.date_debut,c=o.date_fin,a=o.interventions;return e=i.done?"nd"===i.done?"":"Effectu\xe9e -- ".concat(i.probleme_resolu?"R\xe9solu":"Non-r\xe9solu"):"Non-effectu\xe9",t=c===r?c:"".concat(r," - ").concat(c),n="nd"!==s?"par ".concat(s):"",Object(Q.jsxs)("div",{className:"interventionHistoryAffichage",children:[Object(Q.jsxs)("div",{className:"interventionHistoryAffichage-text",children:[Object(Q.jsxs)("p",{children:[" Intervention ",e,"  ",n]}),Object(Q.jsxs)("p",{children:[" du ",t]}),Object(Q.jsxs)("p",{children:[" Nombre : ",a.length," "]})]}),Object(Q.jsx)("div",{className:"scroll_list",children:this.displayInterventions(a)})]})}}]),n}(o.Component)),Ce=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).setTechMain=function(e){console.log("setTechMain",e),o.setState({tech_main:e})},o.setDateDebut=function(e){console.log("setDateDebut",e),e.getTime()>o.state.date_fin.getTime()&&(e=new Date(new Date(o.state.date_fin).setHours(0,0,0))),o.setState({date_debut:e})},o.setDateFin=function(e){console.log("setDateFin",e),e.getTime()<o.state.date_debut.getTime()&&(e=new Date(new Date(o.state.date_debut).setHours(23,59,59))),o.setState({date_fin:e})},o.setStatut=function(e){console.log("setStatut",e),o.setState({statut:e})},o.setNumIntervention=function(e){o.setState({num_intervention:e})},o.setNumInterventionType=function(e){o.setState({num_intervention_type:e})},o.state={tech_main:{num:"nd",username:"nd"},date_debut:new Date((new Date).setFullYear(2020,0,1)),date_fin:new Date((new Date).setHours(23,59,59)),statut:{done:"nd",probleme_resolu:"nd"},interventionList:[],num_intervention:"",num_intervention_type:"nd"},o}return Object(p.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n;t.date_debut.getTime()===this.state.date_debut.getTime()&&t.date_fin.getTime()===this.state.date_fin.getTime()&&t.tech_main.num===this.state.tech_main.num&&t.statut.done===this.state.statut.done&&t.statut.probleme_resolu===this.state.statut.probleme_resolu&&t.num_intervention===this.state.num_intervention&&t.num_intervention_type===this.state.num_intervention_type||(console.log("emit again"),"nd"!==this.state.num_interevnetion&&(n="%".concat(this.state.num_intervention,"%")),this.props.socket.emit("get intervention history",this.state.tech_main.num,this.state.date_debut,this.state.date_fin,this.state.statut,this.state.num_intervention_type,n))}},{key:"componentDidMount",value:function(){var e=this;console.log("intervention History Mounted");var t=this.state,n=t.tech_main,o=t.date_fin,s=t.statut;this.props.socket.emit("get intervention history",n.num,null,o,s,null,null),this.props.socket.emit("get oldest intervention date"),this.props.socket.on("oldest intervention date",(function(t){e.setState({date_debut:new Date(t)})})),this.props.socket.on("intervention history",(function(t){console.log("intervention history",t);var n=t.map((function(e,t){return{num_intervention:e.num_intervention,num_intervention_pere:e.num_intervention_pere,date_programme:e.date_programme,libelle_lieu:e.libelle_lieu,libelle_intervention_type:e.libelle_intervention_type,tech_main_username:e.tech_main_username,motif:e.motif,numero:t+1,done:e.done,probleme_resolu:e.probleme_resolu,libelle_probleme_tech_type:e.libelle_probleme_tech_type,code_intervention_type:e.code_intervention_type,children:e.children,commentaire:e.commentaire}}));console.log("newInterventionList",n),e.setState({interventionList:n})}))}},{key:"componentWillUnmount",value:function(){this.props.socket.off("intervention history"),this.props.socket.off("oldest intervention date")}},{key:"render",value:function(){var e=this.state,t=e.tech_main,n=e.statut,o=e.date_debut,s=e.date_fin,i=e.interventionList,r=(e.num_intervention,e.num_intervention_type);return Object(Q.jsxs)("div",{className:"interventionHistory",children:[Object(Q.jsx)("div",{className:"side-InterventionHistory",children:Object(Q.jsx)(Ee,{socket:this.props.socket,tech_main:t,setTechMain:this.setTechMain,date_debut:o,date_fin:s,setDateDebut:this.setDateDebut,setDateFin:this.setDateFin,statut:n,setStatut:this.setStatut,num_intervention:this.state.num_intervention,setNumIntervention:this.setNumIntervention,num_intervention_type:r,setNumInterventionType:this.setNumInterventionType})}),Object(Q.jsx)(ye,{tech_main_username:t.username,date_debut:o.toLocaleDateString(),date_fin:s.toLocaleDateString(),interventions:i,statut:n,showSub:this.props.showSub})]})}}]),n}(o.Component),we=(n(384),n(385),n(402)),ke=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).updateContenu=function(e){o.setState({newContenu:e.target.value})},o.sendMessage=function(e){console.log("send message"),e.preventDefault();var t=o.props,n=t.session,s=t.selectedUser,i=o.state,r=i.newContenu,c=i.messages;if(o.state.newContenu&&o.props.session&&o.props.selectedUser.num_user){var a=Object(we.a)();console.log("id",a);var l={id:a,sent:!1,time_sent:"",contenu:r,to:s.username,from:n.username},u={id:l.id,contenu:r,num_sender:n.num_user,receivers:[s.num_user]};console.log("emit(send message)",u),o.props.socket.emit("send message",u);var d=c.slice();d.push(l),o.setState({messages:d})}},o.scrollDown=function(){var e=o.myScroll.current;e.scrollTop=e.scrollHeight},o.clickOnMessageRoom=function(){console.log("clickOnMessageRoom"),console.log("clickOnMessageRoom state.message",o.state.messages);var e=o.state.messages.filter((function(e){return!e.seen&&!e.time_seen&&e.to===o.props.session.username}));console.log("unseenMessagesByMe",e),e.length>0&&o.props.socket.emit("app_user saw messages",e)},o.state={messages:[{id:"abab",sent:!0,time_sent:(new Date).toLocaleString(),contenu:"contenu",to:"destinataire",from:"envoyeur"}],newContenu:"",active:o.props.selectedUser.active},o.myScroll=s.a.createRef(),o}return Object(p.a)(n,[{key:"componentDidUpdate",value:function(e,t){e.selectedUser.num_user!==this.props.selectedUser.num_user&&(console.log("emit again"),this.props.socket.emit("get messages",this.props.session.num_user,this.props.selectedUser.num_user))}},{key:"componentDidMount",value:function(){var e=this;console.log("MessageRoom mounted"),this.props.selectedUser.num_user&&this.props.socket.emit("get messages",this.props.session.num_user,this.props.selectedUser.num_user),this.props.socket.on("message sent -messageRoom",(function(t){console.log("message sent -messageRoom",t),e.props.socket.emit("get tech_mains list");var n=e.state.messages.map((function(e){return e.id===t.num_message?Object(c.a)(Object(c.a)({},e),{},{sent:!0,time_sent:new Date(t.date_envoie).toLocaleString()}):e}));e.state.messages.find((function(e){return e.id===t.num_message}))||n.push({id:t.num_message,sent:!0,time_sent:new Date(t.date_envoie).toLocaleString(),contenu:t.contenu_message,from:t.envoyeur_username,to:t.recepteur_username}),e.setState({messages:n,newContenu:""}),e.scrollDown()})),this.props.socket.on("messages -messageRoom",(function(t){if(console.log("messages -messageRoom",t),t){var n=t.map((function(e){var t=!1;return e.date_reception&&(e.date_reception=new Date(e.date_reception).toLocaleString("FR-fr"),t=!0),{id:e.num_message,sent:!0,time_sent:new Date(e.date_envoie).toLocaleString(),time_seen:e.date_reception,seen:t,contenu:e.contenu_message,to:e.recepteur_username,from:e.envoyeur_username}}));console.log("newMessages +",n),e.setState({messages:n}),e.scrollDown(),e.clickOnMessageRoom()}})),this.props.socket.on("new message -messageRoom",(function(t){console.log("new message -messageRoom",t);var n=e.props;n.selectedUser,n.session;if(e.props.socket.emit("get tech_mains list"),e.props.selectedUser.num_user===t.num_app_user_envoyeur){var o={id:t.num_message,time_sent:new Date(t.date_envoie).toLocaleString(),contenu:t.contenu_message,sent:!0,tim_seen:t.date_reception,seen:!1,from:t.envoyeur_username,to:t.recepteur_username};console.log(o);var s=e.state.messages.slice();s.push(o),e.setState({messages:s}),e.scrollDown()}})),this.props.socket.on("updateMessages -messageRoom",(function(t){console.log("updateMessage -messageRoom",t);var n=e.state.messages.slice(),o=t.map((function(e){return e.num_message}));console.log("updatedMessagesId",o),n=n.map((function(e){var n=o.findIndex((function(t){return t===e.id}));if(console.log("indexInUpdateMessage",n),-1!==n){var s=!!t[n].date_reception;return Object(c.a)(Object(c.a)({},e),{},{time_seen:new Date(t[n].date_reception).toLocaleString("fr-FR"),seen:s})}return e})),console.log("newMessages",n),e.props.socket.emit("get nb new message",e.props.session.num_user),e.props.socket.emit("get tech_mains list"),e.setState({messages:n})}))}},{key:"componentWillUnmount",value:function(){console.log("MessageRoom unmount"),this.props.socket.off("message sent -messageRoom"),this.props.socket.off("messages -messageRoom"),this.props.socket.off("new message -messageRoom"),this.props.socket.off("updateMessages -messageRoom")}},{key:"render",value:function(){var e,t=this.state,n=t.messages,o=t.newContenu,s=this.props,i=s.selectedUser,r=s.session,c=n.map((function(e){return Object(Q.jsx)(_e,{message:e,session:r},e.id)}));return e=i.num_user?Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("div",{className:"header-messageRoom",children:Object(Q.jsxs)("p",{children:[" ",i.username," ",i.active?"[connect\xe9]":"[non-connect\xe9]"," "]})}),Object(Q.jsxs)("div",{className:"main-messageRoom",children:[Object(Q.jsx)("div",{className:"scroll_list",ref:this.myScroll,children:c}),Object(Q.jsx)("div",{className:"input-messageRoom",children:Object(Q.jsxs)("form",{onSubmit:this.sendMessage,children:[Object(Q.jsx)("input",{value:o,type:"text",placeholder:"Ecrire ici",onChange:this.updateContenu}),Object(Q.jsx)("button",{onClick:this.sendMessage,children:" envoyer "})]})})]})]}):Object(Q.jsx)("div",{className:"header-messageRoom",children:Object(Q.jsx)("p",{children:" aucun technicien selectionn\xe9 "})}),Object(Q.jsx)("div",{className:"messageRoom",onClick:this.clickOnMessageRoom,children:e})}}]),n}(o.Component);function _e(e){var t,n,o,s=e.message,i=e.session.username===s.from,r=Object(Q.jsxs)("p",{className:"from-message",children:[" ",s.from," : "]}),c=Object(Q.jsxs)("div",{className:"indication-message",children:[Object(Q.jsxs)("p",{children:[" ",s.sent?"envoy\xe9 le ".concat(s.time_sent):""," "]}),Object(Q.jsxs)("p",{children:[" ",s.seen?"re\xe7ue le ".concat(s.time_seen):"non-re\xe7ue"," "]})]}),a=function(e){return Object(Q.jsxs)("div",{className:"contenu-message",style:n,children:[r,Object(Q.jsxs)("p",{children:[" ",s.contenu,"  "]})]})};return i?(t={color:"red",justifyContent:"flex-end"},n={margin:"5px 0 5px 5px",borderLeft:"1px solid grey"},o=Object(Q.jsxs)(Q.Fragment,{children:[c,a()]})):(t={color:"black",justifyContent:"flex-start"},n={margin:"5px 5px 5px 0",borderRight:"1px solid grey"},o=Object(Q.jsxs)(Q.Fragment,{children:[a(),c]})),Object(Q.jsx)("div",{className:"messageElement",style:t,children:o})}function Be(e){var t;t=e.location.state&&e.location.state.num_user&&e.location.state.username?Object(c.a)(Object(c.a)({},e.location.state),{},{active:!0}):{};var n=Object(o.useState)(t),s=Object(ee.a)(n,2),i=s[0],r=s[1];return Object(Q.jsxs)("div",{className:"messagePage",children:[Object(Q.jsx)("div",{className:"side-messagePage",children:Object(Q.jsx)(me,{socket:e.socket,session:e.session,setSelectedUser:r,selectedUser:i})}),Object(Q.jsx)("div",{className:"main-messagePage",children:Object(Q.jsx)(ke,{socket:e.socket,selectedUser:i,session:e.session,setNbNewMessageToZero:e.setNbNewMessageToZero})})]})}n(386),n(387);var Qe=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;Object(d.a)(this,n),o=t.call(this,e);var s=new Date(o.props.end).getDay()-new Date(o.props.start).getDay()+1;return o.state={interventionList:[],nbDay:s},o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("InterventionTimeline mounted");var t=this.props,n=t.session,o=t.start,s=t.end,i=Object(we.a)();o=new Date(new Date(o).setHours(3,0,0)),s=new Date(new Date(s).setHours(26,59,59)),console.log("before emit ",o,s),this.props.socket.emit("get agenda",o,s,n.num_user,i),this.props.socket.on("agenda -interventionTimeline -"+i,(function(t){console.log("agenda -interventionTimeline",t),t=t.map((function(e){return{date:e.date,intervList:Ne(e.intervList)}})),console.log("intervByDay",t),console.log("nbDay",e.state.nbDay),e.setState({interventionList:t})})),this.props.socket.on("new intervention -interventionTimeline",(function(){console.log("new intervention -interventionTimeline"),e.props.socket.emit("get agenda",o,s,n.num_user,i)})),this.props.socket.on("ended intervention -interventionTimeline",(function(){console.log("ended intervention -interventionTimeline"),e.props.socket.emit("get agenda",o,s,n.num_user,i)}))}},{key:"componentWillUnmount",value:function(){console.log("InterventionTimeline unmount"),this.props.socket.off("agenda -interventionTimeline"),this.props.socket.off("new intervention -interventionTimeline"),this.props.socket.off("ended intervention -interventionTimeline")}},{key:"render",value:function(){var e=this,t=this.state.interventionList,n=this.props,s=(n.start,n.end,t.map((function(t){for(var n=[],s=0;s<24;s++)n[s]=Object(o.createElement)(Se,Object(c.a)(Object(c.a)({},e.props),{},{key:s,start:s,end:s+1,date:t.date,intervList:t.intervList[s],showSub:e.props.showSub}));return Object(Q.jsxs)("div",{className:"slotDay",children:[Object(Q.jsxs)("p",{className:"date",children:[" ",t.date]}),n]},t.date)})));return Object(Q.jsx)("div",{className:"interventionTimeline",children:Object(Q.jsx)("div",{className:"scroll_list",children:s})})}}]),n}(o.Component);function Ne(e){console.log("sortByHour",e);for(var t={},n=function(n){t=Object(c.a)(Object(c.a)({},t),{},Object(J.a)({},n,e.filter((function(e){var t=new Date(e.date_programme).getHours();return n===t}))))},o=0;o<24;o++)n(o);return t}function Se(e){var t=e.start,n=(e.end,e.intervList),o=e.date,s=o.split("/"),i=Object(ee.a)(s,3),r=i[0],c=i[1],a=i[2],l=(o=new Date("".concat(a,"-").concat(c,"-").concat(r))).setHours(t+3,0,0,0),u=new Date(l);if(n.length){var d=new Date(new Date(n[n.length-1].date_programme).setMilliseconds(0)+144e5);console.log("newFreeTime",d),u=d}var p=n.map((function(t){return Object(Q.jsx)(ce,{intervention:t,showSub:e.showSub},t.num_intervention)}));return Object(Q.jsxs)("div",{className:"slotTimeLine",onDoubleClick:function(){return t={dateFree:{target:{value:new Date(u).toISOString().replace("Z","")}}},void e.history.push("/acim/creer",t);var t},children:[Object(Q.jsxs)("p",{className:"time",children:[" ",t,"H "]}),Object(Q.jsx)("div",{className:"list",children:p})]})}var Le=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).componentDidMount=function(){console.log("MyTask did mount"),o.props.socket.emit("get undone intervention",o.props.session.num_user),o.props.socket.emit("get pending intervention",o.props.session.num_user),o.props.socket.on("list undone intervention -myTask",(function(e){console.log("list undone intervention",e);var t,n=e.map((function(e,t){return{num_intervention:e.num_intervention,num_intervention_pere:e.num_intervention_pere,date_programme:e.date_programme,date_debut:e.date_debut,libelle_lieu:e.libelle,libelle_intervention_type:e.libelle_intervention_type,tech_main_username:e.username,motif:e.motif,numero:t+1,done:e.done,libelle_probleme_tech_type:e.libelle_probleme_tech_type,code_intervention_type:e.code_intervention_type,commentaire:e.commentaire}})),s=Object(q.a)(n);try{var i=function(){var e=t.value;e.children=n.filter((function(t){return t.num_intervention_pere===e.num_intervention}))};for(s.s();!(t=s.n()).done;)i()}catch(u){s.e(u)}finally{s.f()}console.log("new list intervention undone",n),o.props.setNbInterventionUndone&&o.props.setNbInterventionUndone(n.length);var r=new Date((new Date).setHours(23,59,59)).getTime(),c=n.filter((function(e){return!e.date_debut&&new Date(e.date_programme).getTime()<=(new Date).getTime()})),a=n.filter((function(e){var t=new Date(e.date_programme).getTime();return t>new Date((new Date).setHours(0,0,0)).getTime()&&t<=r})),l=n.filter((function(e){return new Date(e.date_programme).getTime()>r}));console.log("newListToday",a),console.log("newListLate",c),o.setState({interventionListUndone:n,interventionListUndoneLate:c,interventionListUndoneToday:a,interventionListUndoneFuture:l})})),o.props.socket.on("pending intervention -myTask",(function(e){console.log("pending intervention -myTask",e);var t=e.map((function(e,t){return{num_intervention:e.num_intervention,num_intervention_pere:e.num_intervention_pere,date_programme:e.date_programme,libelle_lieu:e.libelle,libelle_intervention_type:e.libelle_intervention_type,tech_main_username:e.username,motif:e.motif,numero:t+1,done:e.done,probleme_resolu:e.probleme_resolu,libelle_probleme_tech_type:e.libelle_probleme_tech_type,code_intervention_type:e.code_intervention_type,children:e.children,commentaire:e.commentaire}}));o.setState({listPendingIntervention:t})})),o.props.socket.on("new intervention -myTask",(function(){o.props.socket.emit("get undone intervention",o.props.session.num_user),o.props.socket.emit("get pending intervention",o.props.session.num_user)})),o.props.socket.on("started intervention -myTask",(function(e){console.log("started intervention -myTask"),o.props.socket.emit("get undone intervention",o.props.session.num_user),o.props.socket.emit("get pending intervention",o.props.session.num_user)})),o.props.socket.on("ended intervention -myTask",(function(e){console.log("ended intervention -myTask"),o.props.socket.emit("get undone intervention",o.props.session.num_user),o.props.socket.emit("get pending intervention",o.props.session.num_user)}))},o.clickOnToDoList=function(){},o.componentWillUnmount=function(){console.log("ToDoList will unmount"),o.props.socket.off("list undone intervention -myTask"),o.props.socket.off("pending intervention -myTask")},o.displayToDo=function(e){return e.map((function(e){return Object(Q.jsx)(W,{showSub:o.props.showSub,intervention:e},e.num_intervention)}))},o.state={interventionListUndone:[],interventionListUndoneLate:[],interventionListUndoneToday:[],interventionListUndoneFuture:[],listPendingIntervention:[]},o}return Object(p.a)(n,[{key:"componentDidUpdate",value:function(){console.log("update MyTask")}},{key:"render",value:function(){var e=this.state,t=e.interventionListUndoneLate,n=e.interventionListUndoneToday,o=e.interventionListUndone,s=e.interventionListUndoneFuture,i=e.listPendingIntervention,r="En retard : ".concat(t.length),a="En cours : ".concat(i.length),l="Aujourd'hui : ".concat(n.length),u="A venir : ".concat(s.length),d="Toutes : ".concat(o.length);return Object(Q.jsxs)("div",{id:"toDoList",onClick:this.clickOnToDoList,children:[Object(Q.jsxs)("p",{children:[" ",this.props.topText||"Liste des taches a faire :"," "]}),Object(Q.jsxs)("div",{className:"scroll_list",children:[Object(Q.jsx)(M,{title:r,titleStyle:{color:"red"},folded:!0,children:Object(Q.jsx)("div",{className:"scroll_list",children:this.displayToDo(t)})}),Object(Q.jsx)(M,{title:a,titleStyle:{color:"red"},folded:!0,children:Object(Q.jsx)("div",{className:"scroll_list",children:this.displayToDo(i)})}),Object(Q.jsx)(M,{title:l,children:Object(Q.jsx)(Qe,Object(c.a)(Object(c.a)({},this.props),{},{session:this.props.session,start:new Date,end:new Date,showSub:this.props.showSub,socket:this.props.socket}))}),Object(Q.jsx)(M,{title:u,folded:!0,children:Object(Q.jsx)("div",{className:"scroll_list",children:this.displayToDo(this.state.interventionListUndoneFuture)})}),Object(Q.jsx)(M,{title:d,folded:!0,children:Object(Q.jsx)("div",{className:"scroll_list",children:this.displayToDo(this.state.interventionListUndone)})})]})]})}}]),n}(o.Component),De=(n(388),function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).state={dates:[],selectedInterv:{}},o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("AgendaTimeline did mount");var t=this.props,n=t.date_debut,o=t.date_fin;this.props.socket.emit("get date stats",n,o,this.props.session.num_user),this.props.socket.on("date stats -agendaTimeline",(function(t){console.log("date stats",t),e.setState({dates:t})}))}},{key:"componentWillUnmount",value:function(){this.props.socket.off("date stats -agendaTimeline")}},{key:"render",value:function(){var e=this,t=this.state,n=t.dates,o=t.selectedInterv,s=n.map((function(t){return Object(Q.jsx)(Te,Object(c.a)(Object(c.a)({},e.props),{},{date:t.date,listInterv:{length:t.stats.nb_intervention},showSub:e.props.showSub,selectedInterv:o,setSelectedInterv:e.setSelectedInterv}),t.date)}));return Object(Q.jsx)("div",{className:"agendaTimeline",children:s})}}]),n}(o.Component));function Te(e){var t=e.date,n=e.listInterv;e.selectedInterv;console.log("AgendaDay",t);var o=t.split("/"),s=Object(ee.a)(o,3),i=s[0],r=s[1],a=s[2];console.log(i,r,a);var l=new Date("".concat(a,"-").concat(r,"-").concat(i));return console.log("AgendaDay",l),Object(Q.jsxs)("div",{className:"agendaDay",children:[Object(Q.jsxs)("p",{children:[" ",t," : ",n.length," intervention",n.length>1?"s":""," "]}),Object(Q.jsx)("div",{className:"listInterv-agendaDay",children:Object(Q.jsx)(Qe,Object(c.a)(Object(c.a)({},e),{},{session:e.session,start:l,end:l,showSub:e.showSub}))})]})}n(389);function Re(e){var t,n=Object(o.useState)(!1),s=Object(ee.a)(n,2),i=s[0],r=s[1];return t=i?Object(Q.jsx)(De,Object(c.a)({},e)):Object(Q.jsx)(ae,Object(c.a)(Object(c.a)({},e),{},{showHeader:!1})),Object(Q.jsxs)("div",{className:"bigAgenda",children:[Object(Q.jsxs)("div",{className:"control",children:[Object(Q.jsx)("p",{children:"Agenda"}),Object(Q.jsxs)("label",{children:[" Details",Object(Q.jsx)("input",{type:"checkbox",value:i,onChange:function(e){return r(e.target.checked)}})]})]}),Object(Q.jsx)("div",{className:"display",children:t})]})}n(390),n(391);var Pe=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).scrollDown=function(){var e=o.myScroll.current;e.scrollTop=e.scrollHeight},o.onClickAnnonceList=function(){console.log("click on annonceList");var e=o.state.annonces.filter((function(e){return!e.date_reception}));console.log("unseen Annonces",e),e.length>0&&o.props.socket.emit("app_user saw messages",e)},o.state={annonces:[]},o.myScroll=s.a.createRef(),o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("annonceList mounted"),this.props.socket.emit("get annonce",this.props.session.num_user),this.props.socket.on("annonces -annonceList",(function(t){console.log("annonces -annonceList",t),t.reverse(),e.setState({annonces:t}),e.scrollDown()})),this.props.socket.on("new annonce -annonceList",(function(t){console.log("new annonce -annonceList",t),e.props.socket.emit("get annonce",e.props.session.num_user)})),this.props.socket.on("updateAnnonce -annonceList",(function(){console.log("updateAnnonce -annonceList"),e.props.socket.emit("get annonce",e.props.session.num_user)}))}},{key:"componentWillUnmount",value:function(){console.log("annonceList unmount"),this.props.socket.off("annonces -annonceList"),this.props.socket.off("new annonce -annonceList"),this.props.socket.off("updateAnnonce -annonceList")}},{key:"render",value:function(){var e,t=this.state.annonces;return e=t.length>0?t.map((function(e){return Object(Q.jsx)(Me,{annonce:e},e.num_message)})):Object(Q.jsx)("p",{children:" Aucune annonce ... "}),Object(Q.jsx)("div",{className:"annonceList",onClick:this.onClickAnnonceList,children:Object(Q.jsx)("div",{className:"scroll_list",ref:this.myScroll,children:e})})}}]),n}(o.Component);function Me(e){var t=e.annonce,n=t.envoyeur_username,o=t.contenu_message,s=t.date_envoie,i=t.date_reception;return Object(Q.jsxs)("div",{className:"annonce",children:[Object(Q.jsxs)("div",{className:"info",children:[Object(Q.jsx)("div",{className:"sender",children:Object(Q.jsxs)("p",{children:[" ",n,": "]})}),Object(Q.jsx)("div",{className:"contenu",children:Object(Q.jsxs)("p",{children:[" ",o," "]})}),Object(Q.jsx)("div",{className:"date",children:Object(Q.jsxs)("p",{children:[" ",new Date(s).toLocaleString("fr-FR")," "]})})]}),Object(Q.jsx)("div",{className:"read",children:i&&Object(Q.jsx)("img",{src:F,alt:"vue"})})]})}function Ue(e){var t=Object(o.useState)(""),n=Object(ee.a)(t,2),s=n[0],i=n[1],r=e.session;new Date((new Date).getTime()-6048e5).toLocaleDateString("fr-FR"),(new Date).toLocaleDateString("fr-FR");return Object(Q.jsxs)("div",{className:"annoncePage",children:[Object(Q.jsx)("div",{className:"header",children:Object(Q.jsx)("p",{children:" Annonce "})}),Object(Q.jsx)("div",{className:"display",children:Object(Q.jsx)(Pe,{session:e.session,socket:e.socket})}),Object(Q.jsx)("div",{className:"input",children:Object(Q.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),console.log("create annonce",r.username,s),s){var n=Object(we.a)();i(""),e.socket.emit("create annonce",n,r.num_user,s)}},children:[Object(Q.jsx)("textarea",{placeholder:"Annonce ...",value:s,onChange:function(e){return i(e.target.value)}}),Object(Q.jsx)("button",{className:"myButton",children:" Publier "})]})})]})}n(392);var Fe=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(Q.jsxs)("div",{className:"appHeader",children:[Object(Q.jsxs)("div",{className:"username",children:[Object(Q.jsx)("img",{className:"user_logo",src:"data:image/png;base64,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"}),Object(Q.jsxs)("p",{children:[" ",this.props.session.username," "]})]}),Object(Q.jsx)("div",{className:"logo-main",children:Object(Q.jsx)("img",{src:B,alt:"mndpt|acimi"})}),Object(Q.jsx)("div",{className:"deconnecter",children:Object(Q.jsx)("button",{onClick:this.props.logOut,className:"myButton",children:" se deconnecter "})})]})}}]),n}(o.Component),He=(n(393),function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).getRapport=function(){console.log("getRapport");var e=o.state,t=e.date_debut,n=e.date_fin,s=o.props.session,i=new URL(document.location.href);if(t&&n&&s.num_user){var r="/rapportActivite/acim/".concat(s.num_user,"/").concat(t,"/").concat(n);i.port=3500,i.pathname=r,console.log("s_URL",i),window.open(i,"_blank")}},o.updateDebut=function(e){console.log("updateDebut "+e.target.value),o.setState({date_debut:e.target.value})},o.updateFin=function(e){console.log("updateFin "+e.target.value);var t=o.state.date_debut;new Date(t).getTime()>new Date(e.target.value).getTime()&&(e.target.value=t),o.setState({date_fin:e.target.value})},o.state={date_debut:"",date_fin:""},o}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.session,t=this.state,n=t.date_debut,o=t.date_fin,s="Generer";if(n&&o){var i=new Date(n).toLocaleDateString("fr-FR"),r=new Date(o).toLocaleDateString("fr-FR");s="Generer rapport du ".concat(i," au ").concat(r),r===i&&(s="Generer rapport du ".concat(i))}return Object(Q.jsxs)("div",{className:"rapportActivite",children:[Object(Q.jsxs)("p",{children:[" ","Rapport d'Activit\xe9 de"," ",e.username," "]}),Object(Q.jsx)("div",{className:"date_selector",children:Object(Q.jsxs)("label",{children:[" Du :",Object(Q.jsx)("input",{type:"date",value:n,onChange:this.updateDebut})]})}),Object(Q.jsx)("div",{className:"date_selector",children:Object(Q.jsxs)("label",{children:[" au :",Object(Q.jsx)("input",{type:"date",value:o,onChange:this.updateFin})]})}),Object(Q.jsxs)("button",{onClick:this.getRapport,children:[" ",s," "]})]})}}]),n}(o.Component)),We=(n(394),n(65)),Ge=n.n(We),Ye=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).startCall=function(){var e=o.props,t=e.session,n=e.userToCall,s=o.state.peerIds,i=n.num_user;n.username;(!o.state.isConnected||o.state.peerIds.length<1)&&o.setState({indic:"utilisateur non-connect\xe9 !!"}),o.state.micIsOk&&o.state.isConnected&&o.state.peerIds.length&&(console.log("call peer ",i),o.myPeer=new Ge.a(void 0,{host:"/",path:"/peer/acim",port:3550}),o.myPeer.on("open",(function(e){console.log("connected to peerServer id ",e)})),o.myPeer.on("connection",(function(e){console.log("connection data label ",e.label),o.setState({indic:"... sonne"}),o.myCalls[e.metadata.peerId].monitorConn=e,o.myCalls[e.metadata.peerId].monitorConn.on("close",(function(){console.log("close calledConn  ",o.myCalls[e.metadata.peerId].monitorConn.label),o.myCalls[e.metadata.peerId].call.close(),delete o.myCalls[e.metadata.peerId],Object.keys(o.myCalls).length<1&&(o.myAudioStream.getTracks().forEach((function(e){return e.stop()})),o.setState({isCalling:!1,indic:"deconnect\xe9 !"}))})),o.myCalls[e.metadata.peerId].monitorConn.on("data",(function(e){o.setState({indic:e})}))})),o.myPeer.on("error",(function(e){console.log("caller this.myPeer error",e),o.setState({indic:"Erreur"})})),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){o.myAudioStream=e,console.log("caller Stream",o.myAudioStream);var n,i={username:t.username,num_user:t.num_user},r=Object(q.a)(s);try{for(r.s();!(n=r.n()).done;){var c=n.value;o.myCalls[c]={},o.myCalls[c].call=o.myPeer.call(c,o.myAudioStream,{metadata:i}),o.setState({isCalling:!0,indic:"connexion ..."}),o.myCalls[c].call.on("stream",(function(e){var t=new Audio;t.srcObject=e,t.play(),console.log("accept this stream",e),console.log("called Stream",e),o.setState({indic:"connect\xe9 !"})})),o.myCalls[c].call.on("error",(function(){console.log("error in call")})),o.myCalls[c].call.on("close",(function(){console.log("close the call in caller"),o.myAudioStream.getTracks().forEach((function(e){return e.stop()}))}))}}catch(a){r.e(a)}finally{r.f()}o.myPeer.on("disconnected",(function(){e.getTracks().forEach((function(e){return e.stop()}))}))})))},o.stopCall=function(){console.log("stop stream",o.myAudioStream,o.myCalls),o.myAudioStream.getTracks().forEach((function(e){return e.stop()}));var e,t=Object(q.a)(o.state.peerIds);try{for(t.s();!(e=t.n()).done;){var n=e.value;console.log("stop stream for peer ",n),o.myCalls[n].monitorConn&&o.myCalls[n].monitorConn.close()}}catch(s){t.e(s)}finally{t.f()}o.myPeer.disconnect(),o.setState({isCalling:!1,indic:""})},o.detectMic=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.enumerateDevices();case 3:t=e.sent,console.log("devices",t),n=!!t.find((function(e){return"audioinput"===e.kind})),o.setState({micIsOk:n}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),o.setState({micIsOk:!1});case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),o.componentDidMount=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("caller mounted"),e.next=3,o.detectMic();case 3:o.props.socket.emit("get list tech_main connected"),o.props.socket.on("peer id",(function(e){console.log("peerIds",e),o.setState({peerIds:e})})),o.props.socket.on("tech_main connected list -caller",(function(e){var t=e.includes(o.props.userToCall.num_user);console.log("tech_main connected list -caller"),setTimeout((function(){o.props.socket.emit("get peer id",o.props.userToCall.num_user)}),2e3),o.setState({isConnected:t})}));case 6:case"end":return e.stop()}}),e)}))),o.state={peerIds:[],isCalling:!1,isConnected:!1,micIsOk:!1,indic:""},o.myPeer=null,o.myCalls={},o.myAudioStream=null,o}return Object(p.a)(n,[{key:"componentWillUnmount",value:function(){console.log("caller unmount"),this.myPeer&&this.myPeer.destroy(),this.props.socket.off("tech_main connected list -caller"),this.props.socket.off("peer id"),this.calledConn&&this.calledConn.close()}},{key:"render",value:function(){var e=this,t=this.props.userToCall,n=this.state,o=n.peerIds,s=n.isCalling,i=n.micIsOk,r=n.isConnected,c=n.indic,a=t.username;t.num_user;r=r&&o.length;var l=Object(Q.jsx)("button",{className:"myButton green",onClick:this.startCall,children:" Appeler "});return s&&(l=Object(Q.jsx)("button",{className:"myButton",onClick:this.stopCall,children:" Raccrocher "})),Object(Q.jsxs)("div",{className:"caller",children:[Object(Q.jsxs)("p",{children:[" Appeler : ",a," ",r?"est connect\xe9":"est hors-connexion"," "]}),Object(Q.jsxs)("p",{children:[" micro : ",i?"OK":"probleme !!"," "]}),Object(Q.jsxs)("p",{children:[" ",c," "]}),Object(Q.jsxs)("div",{className:"control",children:[l,Object(Q.jsx)("button",{onClick:function(){return e.props.deleteFromListToCall(t)},children:" x "})]})]})}}]),n}(o.Component),Xe=n.p+"static/media/correct_notif.a673b70c.wav",Ve=n.p+"static/media/notif1.47150c61.wav",ze=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).addToListToCall=function(e){var t=o.state.listToCall.slice();t.find((function(t){return t.num_user===e.num_user}))?o.setState({showCall:!0}):(t.push(e),console.log("addToListToCall , newListToCall ",t),o.setState({listToCall:t,showCall:!0}))},o.deleteFromListToCall=function(e){var t=o.state.listToCall.slice(),n=t.findIndex((function(t){return t.num_user===e.num_user}));t.splice(n,1),o.setState({listToCall:t,showCall:t.length>0})},o.showSub=function(e){var t;o.state.numSelectedIntervention===e?(t=!o.state.showSub,e=null):t=!0,o.setState({showSub:t,numSelectedIntervention:e})},o.closeSub=function(){o.setState({showSub:!1,numSelectedIntervention:null})},o.nbNewNotificationPlus=function(e){var t=e||o.state.nbNewNotification+1;t=parseInt(t),o.setState({nbNewNotification:t})},o.setNbNewMessage=function(e){var t=parseInt(e);o.setState({nbNewMessage:t})},o.showPopUp=function(e){e.current.style.top="10px",setTimeout((function(){e.current.style.top="-1000px"}),1e4)},o.onClickNotif=function(){var e=o.props.match.url;o.popUp.current.style.top="-1000px",o.props.history.push("".concat(e,"/notifs"))},o.logOut=function(){o.socket.emit("disconnect all"),o.props.logOut()},o.componentDidMount=function(){console.log(" MAIN component did mount"),P.connect(o.props.session.username,o.props.session.type_user,o.props.session.num_user),o.socket.on("you have to disconnect",(function(){console.log("I have to disconnect"),o.props.logOut()})),o.socket.on("new notif",(function(e){console.log("new notif received on main",e);var t=o.state.newNotifs.slice();t.length>4&&t.pop(),t.unshift(e),console.log("newNewNotifs",t),t=t.filter((function(e){var t=(new Date).getTime()-6e5,n=new Date(e.date_envoie).getTime();return console.log("now_2",t),console.log("date_notif",n),console.log(" date_notif is more than 10 minutes old ",n<t),!(n<t)})),console.log("newNewNotifs",t),o.showPopUp(o.popUp);var n=o.state.nbNewNotification+1;o.socket.emit("get nb unanswered notifs"),o.notifSound.play(),o.setState({newNotifs:t,nbNewNotification:n})})),o.socket.on("new message -main",(function(e){console.log("new message -main",e),o.socket.emit("get nb new message",o.props.session.num_user);var t=o.state.newMessageNotifs.slice();"/acim/message"!==o.props.location.pathname&&(t.unshift(e),console.log("newNewMessageNotifs",t),t=t.filter((function(e){var t=(new Date).getTime()-6e5,n=new Date(e.date_envoie).getTime();return console.log("now_2",t),console.log("date_notif",n),console.log(" date_notif is more than 10 minutes old ",n<t),!(n<t)})),console.log("newNewMessageNotifs",t),o.showPopUp(o.popUpMessage)),o.messageSound.play(),o.socket.emit("get nb new message",o.props.session.num_user),o.setState({newMessageNotifs:t})})),o.socket.on("new annonce -main",(function(e){console.log("new annonce -main",e),o.socket.emit("get nb new annonce",o.props.session.num_user);var t=o.state.newMessageNotifs.slice();t.unshift(e),console.log("newNewMessageNotifs",t),t=t.filter((function(e){var t=(new Date).getTime()-6e5,n=new Date(e.date_envoie).getTime();return console.log("now_2",t),console.log("date_notif",n),console.log(" date_notif is more than 10 minutes old ",n<t),!(n<t)})),console.log("newNewMessageNotifs",t),o.showPopUp(o.popUpMessage),o.messageSound.play(),o.setState({newMessageNotifs:t})})),o.socket.emit("get nb new annonce",o.props.session.num_user),o.socket.on("nb new annonce -main",(function(e){console.log("nb new annonce",e),o.setState({nbNewAnnonce:e})})),o.socket.emit("get notifs list unanswered"),o.socket.on("unanswered notifs nb",(function(e){console.log("unanswered notifs nb",e),o.nbNewNotificationPlus(e)})),o.socket.emit("get nb new message",o.props.session.num_user),o.socket.on("nb new message -main",(function(e){console.log("nb new message -main",e),o.setState({nbNewMessage:e})})),o.socket.emit("get nb undone intervention",o.props.session.num_user),o.socket.on("nb intervention undone -main",(function(e){console.log("nb intervention undone -main",e),o.setState({nbUndoneIntervention:e})})),o.socket.on("new intervention -main",(function(e){e.num_app_user_tech_main_creator===o.props.session.num_user&&(console.log("thats one more intervention for me"),o.socket.emit("get nb undone intervention",o.props.session.num_user))})),o.socket.on("ended intervention -main",(function(e){e.num_app_user_tech_main_creator===o.props.session.num_user&&(console.log("thats one less intervention for me"),o.socket.emit("get nb undone intervention",o.props.session.num_user))})),o.socket.on("updateAnnonce -main",(function(){console.log("updateAnnonce -main"),o.socket.emit("get nb new annonce",o.props.session.num_user)}))},o.componentWillUnmount=function(){console.log("UNMOUNT main"),o.socket.off("new notif"),o.socket.off("nb tache undone"),o.socket.off("unanswered notifs nb"),o.socket.off("new message -main"),o.socket.off("nb new message -main"),o.socket.off("new annonce -main"),o.socket.off("nb new annonce -main"),o.socket.off("updateAnnonce -main"),o.socket.off("new intervention -main"),o.socket.off("ended intervention -main"),o.socket.offAny(),o.socket.removeAllListeners(),P.socket.disconnect()},o.showNewNotifs=function(){return o.state.newNotifs.map((function(e){var t;switch(e.probleme_statut_code){case"MAX":t={color:"red"};break;case"MID":t={color:"yellow"};break;case"MIN":t={color:"blue"}}return Object(Q.jsxs)("div",{className:"notif_pop_notif",onClick:o.onClickNotif,children:[Object(Q.jsx)("p",{id:"notif_time",children:new Date(e.date_envoie).toLocaleTimeString("fr-FR")}),Object(Q.jsxs)("p",{style:t,children:[" ",e.probleme_statut," "]}),Object(Q.jsxs)("p",{children:[" ",e.probleme_type," "]}),Object(Q.jsxs)("p",{children:[" ",e.lieu," "]})]},e.num_notification)}))},o.onClickMessageNotif=function(e){console.log("open message",e);var t=o.props.match.url;o.popUpMessage.current.style.top="-1000px",o.props.history.push("".concat(t,"/message"),e)},o.onClickAnnonceNotif=function(){console.log("open annonce");var e=o.props.match.url;o.popUpMessage.current.style.top="-1000px",o.props.history.push("".concat(e,"/annonce"))},o.goToCreateIntervention=function(e){o.props.history.push("/acim/creer",e)},o.showNewMessageNotifs=function(){return o.state.newMessageNotifs.map((function(e){var t,n,s={num_user:e.num_app_user_envoyeur,username:e.envoyeur_username};return e.is_annonce?(t=Object(Q.jsxs)("p",{children:[" Nouvelle annonce de ",s.username," "]}),n=function(){return o.onClickAnnonceNotif()}):(t=Object(Q.jsxs)("p",{children:[" Nouveau message de ",s.username," "]}),n=function(){return o.onClickMessageNotif(s)}),Object(Q.jsx)("div",{className:"notif_pop_notif",onClick:n,children:t},e.num_message)}))},o.showNav=function(){var e=!o.state.showNav;o.setState({showNav:e})},o.closeNav=function(){o.state.showNav&&o.setState({showNav:!1})},o.state={newNotifs:[],nbUndoneIntervention:0,nbNewNotification:0,nbNewMessage:0,nbNewAnnonce:0,showSub:!1,showNav:!1,numSelectedIntervention:null,newMessageNotifs:[],listToCall:[],showCall:!1},o.socket=P.socket,o.popUp=s.a.createRef(),o.popUpMessage=s.a.createRef(),o.notifSound=new Audio(Xe),o.messageSound=new Audio(Ve),o}return Object(p.a)(n,[{key:"render",value:function(){var e,t,n,o,s,i,r=this,a=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),l=this.props.match,u=l.path,d=l.url,p=this.props.session,m=this.state,A=m.showSub,h=m.numSelectedIntervention,b=m.nbUndoneIntervention,f=m.nbNewMessage,g=m.nbNewNotification,j=m.nbNewAnnonce,v=m.showNav,O=m.showCall,x=m.listToCall,I=new Date,E=new Date(I.getTime()+24192e5);return A?(e=Object(c.a)(Object(c.a)({},e),{},{display:"none"}),t=Object(c.a)(Object(c.a)({},t),{},{width:"100%"})):(t=Object(c.a)(Object(c.a)({},t),{},{width:"0px"}),i=Object(c.a)(Object(c.a)({},i),{},{display:"none"})),a<=930&&v&&(n={display:"flex"}),O&&(o={top:"20px"},s=x.map((function(e){var t=e.username,n=e.num_user;return Object(Q.jsx)(Ye,{socket:r.socket,session:r.props.session,deleteFromListToCall:r.deleteFromListToCall,userToCall:{username:t,num_user:n}},n)}))),Object(Q.jsxs)("div",{className:"main_layout",children:[Object(Q.jsx)("div",{className:"notif_pop",ref:this.popUp,children:this.showNewNotifs()}),Object(Q.jsx)("div",{className:"notif_pop",ref:this.popUpMessage,children:this.showNewMessageNotifs()}),Object(Q.jsxs)("div",{className:"call_list",style:o,children:[Object(Q.jsxs)("div",{className:"header",children:[Object(Q.jsx)("p",{children:" Appels : "}),Object(Q.jsx)("button",{onClick:function(){return r.setState({showCall:!1})},children:" X "})]}),Object(Q.jsx)("div",{className:"scroll_list",children:s})]}),Object(Q.jsx)("div",{className:"side_bt",children:Object(Q.jsx)("button",{onClick:this.showNav,children:" ... "})}),Object(Q.jsx)("div",{className:"header",children:Object(Q.jsx)(Fe,{session:this.props.session,logOut:this.logOut})}),Object(Q.jsxs)("div",{className:"main_display",children:[Object(Q.jsxs)("nav",{className:"side_nav",id:"main_nav",style:n,children:[Object(Q.jsxs)(S.c,{activeClassName:"active_navLink",to:"".concat(d,"/mytasknew"),onClick:this.closeSub,children:["Mes t\xe2ches",b>0?"(".concat(b,")"):""]}),Object(Q.jsx)(S.c,{activeClassName:"active_navLink",to:"".concat(d,"/dashboard"),onClick:this.closeSub,children:"Tableau de bord"}),Object(Q.jsxs)(S.c,{activeClassName:"active_navLink",to:"".concat(d,"/notifs"),onClick:this.closeSub,children:["Notifications",g>0?"(".concat(g,")"):""]}),Object(Q.jsxs)(S.c,{activeClassName:"active_navLink",to:"".concat(d,"/message"),onClick:this.closeSub,children:["Messages ",f>0?"(".concat(f,")"):""]}),Object(Q.jsxs)(S.c,{activeClassName:"active_navLink",to:"".concat(d,"/annonce"),onClick:this.closeSub,children:["Annonces ",j>0?"(".concat(j,")"):""]}),Object(Q.jsx)(S.c,{activeClassName:"active_navLink",to:"".concat(d,"/agenda"),onClick:this.closeSub,children:"Agenda"}),Object(Q.jsx)(S.c,{activeClassName:"active_navLink",to:"".concat(d,"/creer"),onClick:this.closeSub,children:"Creer une intervention"}),Object(Q.jsx)(S.c,{activeClassName:"active_navLink",to:"".concat(d,"/notifsHistory"),onClick:this.closeSub,children:"Historiques des notifications"}),Object(Q.jsx)(S.c,{activeClassName:"active_navLink",to:"".concat(d,"/interventionHistory"),onClick:this.closeSub,children:"Historiques des interventions"}),Object(Q.jsx)(S.c,{activeClassName:"active_navLink",to:"".concat(d,"/rapport"),onClick:this.closeSub,children:"Rapport d'activit\xe9"})]}),Object(Q.jsxs)("div",{className:"main-tabDisplay",style:undefined,onClick:this.closeNav,children:[Object(Q.jsx)("div",{className:"display",style:e,children:Object(Q.jsxs)(D.d,{children:[Object(Q.jsx)(D.b,{exact:!0,path:u,children:Object(Q.jsx)(D.a,{to:"".concat(u,"/mytasknew")})}),Object(Q.jsx)(D.b,{path:"".concat(u,"/dashboard"),render:function(e){return Object(Q.jsx)(fe,Object(c.a)(Object(c.a)({},e),{},{socket:r.socket,session:r.props.session,showSub:r.showSub,closeSub:function(){return r.showSub(h)}}))}}),Object(Q.jsx)(D.b,{path:"".concat(u,"/mytask"),render:function(e){return Object(Q.jsx)(G,Object(c.a)(Object(c.a)(Object(c.a)({},e),r.props),{},{showSub:r.showSub,socket:r.socket,num_tech_main:p.num_user,topText:"Listes des taches a faire par ".concat(p.username," :"),closeSub:function(){return r.showSub(h)}}))}}),Object(Q.jsx)(D.b,{path:"".concat(u,"/mytasknew"),render:function(e){return Object(Q.jsx)(Le,Object(c.a)(Object(c.a)({},e),{},{showSub:r.showSub,socket:r.socket,session:r.props.session}))}}),Object(Q.jsx)(D.b,{path:"".concat(u,"/notifs"),render:function(e){return Object(Q.jsx)(K,Object(c.a)(Object(c.a)(Object(c.a)({},e),r.props),{},{addToListToCall:r.addToListToCall,deleteFromListToCall:r.deleteFromListToCall,setNbNewNotif:r.nbNewNotificationPlus,nbNewNotificationToZero:function(){return r.nbNewNotificationPlus("0")},socket:r.socket}))}}),Object(Q.jsx)(D.b,{path:"".concat(u,"/notifsHistory"),render:function(e){return Object(Q.jsx)(je,Object(c.a)(Object(c.a)({},e),{},{session:r.props.session,socket:r.socket,closeSub:function(){return r.showSub(h)}}))}}),Object(Q.jsx)(D.b,{path:"".concat(u,"/interventionHistory"),render:function(e){return Object(Q.jsx)(Ce,Object(c.a)(Object(c.a)({},e),{},{session:r.props.session,socket:r.socket,showSub:r.showSub,closeSub:function(){return r.showSub(h)}}))}}),Object(Q.jsx)(D.b,{path:"".concat(u,"/message"),render:function(e){return Object(Q.jsx)(Be,Object(c.a)(Object(c.a)({session:r.props.session,socket:r.socket},e),{},{setNbNewMessageToZero:function(){return r.setNbNewMessage(0)}}))}}),Object(Q.jsx)(D.b,{path:"".concat(u,"/annonce"),render:function(e){return Object(Q.jsx)(Ue,{session:r.props.session,socket:r.socket})}}),Object(Q.jsx)(D.b,{path:"".concat(u,"/creer"),render:function(e){return Object(Q.jsx)(pe,Object(c.a)(Object(c.a)(Object(c.a)({},e),r.props),{},{showSub:r.showSub,socket:r.socket,session:r.props.session}))}}),Object(Q.jsx)(D.b,{path:"".concat(u,"/agenda"),render:function(e){return Object(Q.jsx)(Re,Object(c.a)(Object(c.a)({},e),{},{session:r.props.session,socket:r.socket,showSub:r.showSub,date_debut:I,date_fin:E,close:function(){return console.log("fermer agenda")},setSelectedDate:function(e){return r.goToCreateIntervention({dateFree:e})}}))}}),Object(Q.jsx)(D.b,{path:"".concat(u,"/agendaSimple"),render:function(e){return Object(Q.jsx)(ae,{session:r.props.session,socket:r.socket,showSub:r.showSub,date_debut:I,date_fin:E,close:function(){return console.log("fermer agenda")},setSelectedDate:function(e){return r.goToCreateIntervention({dateFree:e})}})}}),Object(Q.jsx)(D.b,{path:"".concat(u,"/agendaTimeline"),render:function(e){return Object(Q.jsx)(De,Object(c.a)(Object(c.a)({},e),{},{session:r.props.session,socket:r.socket,showSub:r.showSub,date_debut:new Date("2021-07-01"),date_fin:new Date("2021-08-01"),close:function(){return console.log("fermer agenda")}}))}}),Object(Q.jsx)(D.b,{path:"".concat(u,"/rapport"),render:function(e){return Object(Q.jsx)(He,{session:r.props.session})}})]})}),Object(Q.jsx)("div",{className:"sub-display",style:t,children:Object(Q.jsx)(xe,Object(c.a)(Object(c.a)({num_intervention:this.state.numSelectedIntervention},this.props),{},{style:i,closeSub:function(){return r.showSub(h)},showSub:this.showSub,socket:this.socket}))})]})]})]})}}]),n}(s.a.Component),Ze=(n(396),n(397),function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).updateProblem=function(e){o.setState({problem:e.target.value})},o.updateProblemType=function(e){o.setState({num_probleme_type:e.target.value})},o.updateProblemStatut=function(e){o.setState({num_probleme_statut:e.target.value})},o.updateLieu=function(e){o.setState({num_lieu:e.target.value})},o.updateRemarque=function(e){o.setState({remarque:e.target.value})},o.componentDidMount=function(){console.log("ask mount"),o.props.socket?(o.props.socket.on("list problem",(function(e){console.log("list problem in ask",e);var t=e.map((function(e){return{key:e.num_probleme_type,value:e.num_probleme_type,libelle:e.libelle,code:e.code}}));o.setState({listProblem:t,num_probleme_type:t[0].value})})),o.props.socket.on("list problem_statut",(function(e){console.log(" getting list problem_statut");var t=e.map((function(e){return{key:e.num_probleme_statut,value:e.num_probleme_statut,libelle:e.libelle}}));o.setState({listProblemStatut:t,num_probleme_statut:t[0].value})})),o.props.socket.on("list lieu",(function(e){console.log(" getting list lieu");var t=e.map((function(e){return{key:e.num_lieu,value:e.num_lieu,libelle:e.libelle}}));o.setState({listLieu:t,num_lieu:t[0].value})})),o.props.socket.on("I sent a notif",(function(e){e.date_envoie=new Date(e.date_envoie).toLocaleString("fr-FR"),console.log("new notif in history"),o.props.nbNewNotifsPlus(),o.setState({indication:"Demande envoyee #".concat(e.date_envoie)})})),o.props.socket.emit("get problem definition")):console.log(" no socket in ask")},o.componentDidupdate=function(){console.log("componentDidUpdate ask")},o.componentWillUnmount=function(){console.log("unmount ask"),o.props.socket.off("list problem"),o.props.socket.off("list problem_statut"),o.props.socket.off("list lieu"),o.props.socket.off("I sent a notif")},o.sendNotifs=function(){var e;if(console.log("listProblem",o.state.listProblem),0!==o.state.listProblem.length&&(e=o.state.listProblem.find((function(e){return e.key===o.state.num_probleme_type})).code),console.log(" selected problem type is "+e),"OTH"!==e||o.state.remarque){if(o.props.session&&o.state.num_lieu&&o.state.num_probleme_type&&o.state.num_probleme_statut){var t={num_probleme_type:o.state.num_probleme_type,num_probleme_statut:o.state.num_probleme_statut,num_lieu:o.state.num_lieu,remarque:o.state.remarque},n={num_app_user_user:o.state.session.num_user,newProblem:t};console.log("send notif ",n),o.props.socket.emit("notif",n)}}else o.setState({indication:"Vous devez ecrire une remarque"})},o.state={listProblem:[],listProblemStatut:[],listLieu:[],session:o.props.session,problem:"",num_probleme_type:"",num_probleme_statut:"",num_lieu:"",remarque:"",indication:""},o}return Object(p.a)(n,[{key:"render",value:function(){var e;return this.state.indication&&(e={opacity:1,right:0}),Object(Q.jsxs)("div",{className:"ask",children:[Object(Q.jsx)("p",{children:"Demande d'assistance"}),Object(Q.jsxs)("div",{className:"dropdown-zone",children:[Object(Q.jsx)("p",{children:" Probleme  : "}),Object(Q.jsx)($,{value:this.state.num_probleme_type,onChange:this.updateProblemType,objArray:this.state.listProblem})]}),Object(Q.jsxs)("div",{className:"remarque-problem",children:[Object(Q.jsx)("p",{children:" remarque : "}),Object(Q.jsx)("textarea",{value:this.state.remarque,onChange:this.updateRemarque,placeholder:"remarque ici"})]}),Object(Q.jsxs)("div",{className:"double-dropdown",children:[Object(Q.jsxs)("div",{className:"dropdown-zone",children:[Object(Q.jsx)("p",{children:" Urgence : "}),Object(Q.jsx)($,{defaultValue:"xx",value:this.state.num_probleme_statut,objArray:this.state.listProblemStatut,onChange:this.updateProblemStatut})]}),Object(Q.jsxs)("div",{className:"dropdown-zone",children:[Object(Q.jsx)("p",{children:" Lieu : "}),Object(Q.jsx)($,{value:this.state.num_lieu,objArray:this.state.listLieu,onChange:this.updateLieu})]})]}),Object(Q.jsx)("button",{className:"my-button",onClick:this.sendNotifs,children:" Envoyer "}),Object(Q.jsxs)("div",{className:"indication",style:e,children:[" ",this.state.indication," "]})]})}}]),n}(s.a.Component)),Ke=(n(398),function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).componentDidMount=function(){o.props.socket.emit("get notifs history",o.props.session.num_user),o.props.socket.on("notifs history",(function(e){console.log("notification history",e);var t=e.map((function(e){return{num_notification:e.num_notification,probleme_type:e.probleme_type,probleme_code:e.code,statut_code:e.statut,statut_libelle:e.statut_libelle,lieu:e.lieu,remarque:e.remarque||"-",date_envoie:new Date(e.date_envoie).toLocaleString("fr-FR"),num_app_user_tech_main:e.num_app_user_tech_main,tech_main_username:e.tech_main_username||"-",date_reponse:e.date_reponse?new Date(e.date_reponse).toLocaleString("fr-FR"):"-",num_intervention:e.num_intervention||"nd",date_programme:e.date_programme?new Date(e.date_programme).toLocaleString("fr-FR"):"-"}}));o.setState({notifsTab:t})})),o.props.socket.on("notif from tech_main",(function(){console.log("notif from tech_main in history js"),setTimeout((function(){console.log("notif from tech_main"),o.props.socket.emit("get notifs history",o.props.session.num_user)}),5e3)})),o.props.nbNewNotifsToZero()},o.displayNotif=function(e){return e.map((function(e){return Object(Q.jsx)(Z,{showSub:o.props.showSub,notif:e},e.num_notification)}))},o.componentWillUnmount=function(){o.props.socket.off("notifs history")},o.state={notifsTab:[]},o}return Object(p.a)(n,[{key:"render",value:function(){return Object(Q.jsxs)("div",{id:"notifsList",children:[Object(Q.jsxs)("p",{children:[" Historiques des notifications envoyees par ",this.props.session.username,":  "]}),Object(Q.jsx)("div",{id:"scroll_list-notifsList",children:this.displayNotif(this.state.notifsTab)})]})}}]),n}(s.a.Component)),Je=(n(399),function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(d.a)(this,n),(s=t.call(this,e)).componentDidMount=function(){console.log("component did mount intervention_notification"),s.props.socket.emit("get list intervention_notification",s.props.session.num_user),s.props.socket.on("list intervention_notification",(function(e){console.log("list intervention",e);var t=e.map((function(e,t){return{num_intervention:e.num_intervention,code_intervention_type:e.code_intervention_type,date_programme:e.date_programme,lieu_libelle:e.lieu,libelle_intervention_type:e.libelle_intervention_type,tech_main_username:e.tech_main_username,motif:e.motif,numero:t+1,done:e.done,children:e.children,probleme_resolu:e.probleme_resolu}}));s.setState({interventionTab:t})})),s.props.socket.on("ended intervention",(function(){s.props.socket.emit("get list intervention_notification",s.props.session.num_user)}))},s.componentWillUnmount=function(){console.log("intervention_notification will unmount"),s.props.socket.off("list intervention_notification")},s.displayListInterevention=function(e){return e.map((function(e){return e.num_intervention===s.props.numSelectedIntervention?Object(o.createElement)(W,Object(c.a)(Object(c.a)({},s.props),{},{intervention:e,key:e.num_intervention,selected:!0})):Object(o.createElement)(W,Object(c.a)(Object(c.a)({},s.props),{},{intervention:e,key:e.num_intervention,selected:!1}))}))},s.state={interventionTab:[]},s}return Object(p.a)(n,[{key:"render",value:function(){return Object(Q.jsxs)("div",{className:"intervention_notification",children:[Object(Q.jsxs)("p",{children:[" Interventions provenant des notifactions de ",this.props.session.username," "]}),Object(Q.jsx)("div",{className:"scroll_list",children:this.displayListInterevention(this.state.interventionTab)})]})}}]),n}(s.a.Component)),qe=(n(400),n.p+"static/media/ringtone.8c85869d.wav"),$e=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).acceptCall=function(){var e=o.state,t=e.micIsOk,n=e.isConnected,s=o.props,i=(s.peer,s.caller.call);console.log("accept call ",i),console.log("micIsOk , isConnected ",t,n),t&&n?(o.ringtone.pause(),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){o.myAudioStream=e,console.log("called Stream",o.myAudioStream),i.answer(o.myAudioStream),o.monitorConn.send("Connect\xe9"),i.on("stream",(function(e){var t=new Audio;t.srcObject=e,t.play(),console.log("accept this stream",e),console.log("caller Stream",e),o.setState({callOk:!0,indic:"connect\xe9 !"})})),i.on("close",(function(){console.log("close the call in callED"),console.log("fin appel de",o.props.caller.username),console.log("stop stream",o.myAudioStream),o.myAudioStream.getTracks().forEach((function(e){return e.stop()})),o.props.caller.call.close(),o.setState({callOk:!1}),o.monitorConn.close()})),i.on("error",(function(){console.log("error in call")}))})).catch((function(e){console.log("error navigator.mediaDevices.getUserMedia in called",e),o.setState({micIsOk:!1,indic:"reception uniquement"}),o.monitorConn.send("Connect\xe9 ,le micro du recepteur ne marche pas"),i.answer(),i.on("stream",(function(e){var t=new Audio;t.srcObject=e,t.play(),console.log("accept this stream",e),console.log("caller Stream",e),o.setState({callOk:!0})})),i.on("close",(function(){console.log("close the call in callED"),console.log("fin appel de",o.props.caller.username),console.log("stop stream",o.myAudioStream),o.myAudioStream&&o.myAudioStream.getTracks().forEach((function(e){return e.stop()})),o.props.caller.call.close(),o.setState({callOk:!1}),o.monitorConn.close()})),i.on("error",(function(){console.log("error in call")}))}))):t||(console.log("no mic"),o.ringtone.pause(),o.setState({micIsOk:!1,indic:"reception uniquement"}),o.monitorConn.send("Connect\xe9 ,le micro du recepteur ne marche pas"),i.answer(),i.on("stream",(function(e){var t=new Audio;t.srcObject=e,t.play(),console.log("accept this stream",e),console.log("caller Stream",e),o.setState({callOk:!0})})),i.on("close",(function(){console.log("close the call in callED"),console.log("fin appel de",o.props.caller.username),console.log("stop stream",o.myAudioStream),o.myAudioStream&&o.myAudioStream.getTracks().forEach((function(e){return e.stop()})),o.props.caller.call.close(),o.setState({callOk:!1}),o.monitorConn.close()})),i.on("error",(function(){console.log("error in call")})))},o.stopCall=function(){console.log("fin appel de",o.props.caller.username),console.log("stop stream",o.myAudioStream),o.myAudioStream&&o.myAudioStream.getTracks().forEach((function(e){return e.stop()})),o.props.caller.call.close(),o.ringtone.pause(),o.close(),o.setState({callOk:!1,indic:""})},o.detectMic=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!navigator.mediaDevices){e.next=11;break}return e.next=4,navigator.mediaDevices.enumerateDevices();case 4:t=e.sent,console.log("devices",t),n=!!t.find((function(e){return"audioinput"===e.kind})),console.log("detectMic micIsOk",n),o.setState({micIsOk:n}),e.next=11;break;case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("error in detectMic :",e.t0),o.setState({micIsOk:!1});case 17:case"end":return e.stop()}}),e,null,[[0,13]])}))),o.componentDidMount=Object(u.a)(l.a.mark((function e(){var t,n,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("called mounted"),t=o.props,n=t.peer,s=t.caller,i=s.call,e.next=5,o.detectMic();case 5:o.props.socket.emit("get list tech_main connected"),i&&o.ringtone.play(),o.monitorConn=n.connect(s.call.peer,{label:"audio",metadata:{peerId:n.id}}),o.monitorConn.on("close",(function(){console.log("called this.monitorConn close"),o.close(),i.close()})),o.monitorConn.on("error",(function(e){console.log("monitorConn error",e),o.ringtone.pause()})),o.props.socket.on("tech_main connected list -called",(function(e){console.log("tech_main connected list -called",e);var t=e.includes(o.props.caller.num_user);o.setState({isConnected:t})}));case 11:case"end":return e.stop()}}),e)}))),o.close=function(){console.log("close called"),o.monitorConn.close(),o.props.onClose()},o.state={callOk:o.props.callOk||!1,isConnected:!1,micIsOk:!1,indic:""},o.myAudioStream=null,o.monitorConn=null,o.ringtone=new Audio(qe),o}return Object(p.a)(n,[{key:"componentWillUnmount",value:function(){console.log("called unmount"),this.props.socket.off("tech_main connected list -called"),this.myAudioStream&&this.myAudioStream.getTracks().forEach((function(e){return e.stop()})),this.props.caller.call.close(),this.ringtone.pause()}},{key:"render",value:function(){var e=this.state,t=e.micIsOk,n=e.callOk,o=(e.isConnected,e.indic),s=this.props.caller,i=Object(Q.jsx)("button",{onClick:this.stopCall,children:" Raccrocher "});return n||(i=Object(Q.jsx)("button",{onClick:this.acceptCall,children:" Accepter "})),Object(Q.jsxs)("div",{className:"called",children:[Object(Q.jsxs)("p",{children:[" Appel de ",s.username]}),Object(Q.jsxs)("p",{children:[" micro : ",t?"OK":"probleme !!"," "]}),Object(Q.jsxs)("p",{children:[" ",o," "]}),Object(Q.jsxs)("div",{className:"control",children:[i,Object(Q.jsx)("button",{onClick:this.close,children:" x "})]})]})}}]),n}(o.Component),et=n.p+"static/media/flute_notif.df9fcaa1.wav",tt=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).addToCallers=function(e){var t=o.state.callers.slice();t.find((function(t){return t.num_user===e.num_user}))?o.setState({showCall:!0}):(t.push(e),console.log("addToCallers , newCallers ",t),o.setState({callers:t,showCall:!0}))},o.deleteFromCallers=function(e){var t=o.state.callers.slice(),n=t.findIndex((function(t){return t.num_user===e.num_user}));t.splice(n,1);var s=o.state.showCall;t.length<1&&(s=!1),o.setState({callers:t,showCall:s})},o.nbNewNotifsPlus=function(e){console.log("new notifs ++");var t=e||o.state.nbNewNotifs+1;t=parseInt(t),console.log("new notifs ",t),o.setState({nbNewNotifs:t})},o.logOut=function(){o.socket.emit("disconnect all"),o.props.logOut()},o.showNotif=function(e){console.log("show Notif"),e.current.style.top="157px",setTimeout((function(){e.current.style.top="-1000px"}),1e4)},o.hideNotif=function(e){e.current.style.top="-1000px"},o.showSubWithInfo=function(e){var t;o.state.numSelectedIntervention===e?(t=!o.state.showSub,e=null):t=!0,o.setState({showSub:t,numSelectedIntervention:e})},o.formatNotifsList=function(e){return e.map((function(e){return Object(Q.jsxs)("div",{className:"notify_notif",onClick:function(){return o.hideNotif(o.notify_notif_pop)},children:[Object(Q.jsxs)("p",{children:[" Intervention de ",e.tech_main_username," \xe0 ",e.date_programme]}),Object(Q.jsxs)("p",{children:[" probleme : ",e.probleme_type," -- ",e.lieu," "]}),Object(Q.jsxs)("p",{children:[" notifiee le : ",e.date_envoie_formatted," "]})]},e.key)}))},o.openAnnonce=function(){console.log("open annonce");var e=o.props.match.url;o.message_notifs_pop.current.style.top="-1000px",o.props.history.push("".concat(e,"/annonce"))},o.state={nbNewNotifs:0,notifsList:[],nbNewAnnonce:0,newMessageNotifs:[],callers:[],showSub:!1,showCall:!1,numSelectedIntervention:null},o.socket=P.socket,o.myPeer=null,o.notify_notif_pop=s.a.createRef(),o.message_notifs_pop=s.a.createRef(),o.notifSound=new Audio(et),o.messageSound=new Audio(Ve),o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;P.connect(this.props.session.username,this.props.session.type_user,this.props.session.num_user),console.log("notify mounted , socket id ",P.id),this.socket.on("you have to disconnect",(function(){e.props.logOut()})),this.socket.emit("get nb new annonce",this.props.session.num_user,"notify"),this.socket.on("nb new annonce -notify",(function(t){console.log("nb new annonce -notify",t),e.setState({nbNewAnnonce:t})})),this.socket.on("notif from tech_main",(function(t){var n=t.tech_main_username,o=t.probleme_type,s=t.date_envoie,i=t.lieu,r=t.num_notification,c=t.date_programme,a=t.date_reponse;console.log("notif from tech_main",n,o,s);var l=new Date(s).toLocaleString("fr-FR"),u={tech_main_username:n,probleme_type:o,lieu:i,date_envoie_formatted:l,date_envoie:s,date_reponse:a,date_programme:new Date(c).toLocaleString("fr-FR"),text:"".concat(n,' arrive pour le probleme : " ').concat(o,' " lieu : ').concat(i," - notifie le ").concat(l," "),key:r},d=e.state.notifsList.slice();d.length>4&&d.pop(),d.unshift(u),d=d.filter((function(e){var t=(new Date).getTime()-6e5;return!(new Date(e.date_reponse).getTime()<t)})),console.log("newNotifsList",d),e.showNotif(e.notify_notif_pop),e.notifSound.play(),e.setState({notifsList:d})})),this.socket.on("new annonce -notify",(function(t){console.log("new annonce -notify",t);var n=e.state.newMessageNotifs.slice();n.unshift(t),console.log("newNewMessageNotifs",n),n=n.filter((function(e){var t=(new Date).getTime()-6e5,n=new Date(e.date_envoie).getTime();return console.log("now_2",t),console.log("date_notif",n),console.log(" date_notif is more than 10 minutes old ",n<t),!(n<t)})),console.log("newNewMessageNotifs",n),e.showNotif(e.message_notifs_pop),e.messageSound.play(),e.socket.emit("get nb new annonce",e.props.session.num_user,"notify"),e.setState({newMessageNotifs:n})})),this.socket.on("updateAnnonce -notify",(function(){console.log("updateAnnonce -notify"),e.socket.emit("get nb new annonce",e.props.session.num_user,"notify")})),this.socket.emit("get socket id"),this.socket.on("socket id",(function(t){console.log("socket id",t),e.myPeer=new Ge.a(t,{host:"/",path:"/peer/acim",port:3550}),e.myPeer.on("open",(function(t){console.log("connected to peerServer id ",t),e.socket.emit("register peer id",e.props.session.num_user,t)})),e.myPeer.on("error",(function(e){console.log("notify this.myPeer error",e)})),e.myPeer.on("call",(function(t){var n={call:t,username:t.metadata.username,num_user:t.metadata.num_user};e.addToCallers(n)}))}))}},{key:"componentWillUnmount",value:function(){console.log("unmount notify"),this.socket.off("list problem"),this.socket.off("list problem_statut"),this.socket.off("list lieu"),this.socket.off("notif from tech_main"),this.socket.off("new annonce -notify"),this.socket.off("nb new annonce -notify"),this.socket.off("socket id"),this.socket.offAny(),this.myPeer.destroy(),P.disconnect()}},{key:"render",value:function(){var e,t,n,o,s,i,r=this,a=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),l=this.state,u=l.numSelectedIntervention,d=l.newMessageNotifs,p=l.nbNewAnnonce,m=l.showCall,A=l.callers;return this.state.showSub?(n={width:"45%"},a<=930&&(n={width:"100%"},o={width:"0",background:"red",display:"none"})):(n={background:"black",width:"0px",display:"none"},s={display:"none"}),i=d.map((function(e){if(e.is_annonce)return Object(Q.jsx)("p",{onClick:r.openAnnonce,className:"notify_notif",children:"Nouvelle annonce de la DSI "},e.num_message)})),m&&(e={left:"50px"},t=A.map((function(e){return Object(Q.jsx)($e,{caller:e,onClose:function(){return r.deleteFromCallers(e)},peer:r.myPeer,socket:r.socket},e.num_user)}))),Object(Q.jsxs)("div",{className:"notify_layout",children:[Object(Q.jsx)(Fe,{session:this.props.session,logOut:this.logOut}),Object(Q.jsxs)("div",{className:"notify_display",children:[Object(Q.jsx)(nt,Object(c.a)(Object(c.a)(Object(c.a)({},this.state),{},{style:o},this.props),{},{socket:this.socket,nbNewNotifsPlus:this.nbNewNotifsPlus,showSub:this.showSubWithInfo,numSelectedIntervention:this.state.numSelectedIntervention,nbNewAnnonce:p})),Object(Q.jsx)("div",{className:"sub-display",style:n,children:Object(Q.jsx)(xe,Object(c.a)(Object(c.a)({num_intervention:this.state.numSelectedIntervention},this.props),{},{socket:this.socket,style:s,closeSub:function(){return r.showSubWithInfo(u)}}))}),Object(Q.jsx)("div",{className:"notify_notif_pop",ref:this.notify_notif_pop,children:this.formatNotifsList(this.state.notifsList)}),Object(Q.jsx)("div",{className:"notify_notif_pop",ref:this.message_notifs_pop,children:i}),Object(Q.jsx)("div",{className:"call",style:e,children:t})]})]})}}]),n}(s.a.Component);function nt(e){var t=e.match,n=t.path,o=t.url;return Object(Q.jsxs)("div",{className:"tab-display",style:e.style,children:[Object(Q.jsxs)("nav",{className:"notify_nav",children:[Object(Q.jsxs)(S.c,{activeClassName:"active_navLink_notify",to:"".concat(o,"/annonce"),children:["Annonces de la DSI",e.nbNewAnnonce>0?"(".concat(e.nbNewAnnonce,")"):""]}),Object(Q.jsx)(S.c,{activeClassName:"active_navLink_notify",to:"".concat(o,"/ask"),children:"Demande d'assistance"}),Object(Q.jsxs)(S.c,{activeClassName:"active_navLink_notify",to:"".concat(o,"/history"),children:["Historiques des demandes",e.nbNewNotifs>0?"(".concat(e.nbNewNotifs,")"):""]}),Object(Q.jsx)(S.c,{activeClassName:"active_navLink_notify",to:"".concat(o,"/intervention"),children:"Interventions"})]}),Object(Q.jsxs)("div",{className:"display",children:[e.children,Object(Q.jsxs)(D.d,{children:[Object(Q.jsx)(D.b,{path:"".concat(n,"/annonce"),render:function(t){return Object(Q.jsx)(Pe,{session:e.session,socket:e.socket})}}),Object(Q.jsx)(D.b,{path:"".concat(n,"/ask"),render:function(t){return Object(Q.jsx)(Ze,Object(c.a)(Object(c.a)({},t),{},{session:e.session,socket:e.socket,nbNewNotifsPlus:e.nbNewNotifsPlus}))}}),Object(Q.jsx)(D.b,{path:"".concat(n,"/history"),render:function(t){return Object(Q.jsx)(Ke,Object(c.a)(Object(c.a)({},t),{},{session:e.session,socket:e.socket,nbNewNotifsToZero:function(){return e.nbNewNotifsPlus("0")},showSub:e.showSub,numSelectedIntervention:e.numSelectedIntervention}))}}),Object(Q.jsx)(D.b,{path:"".concat(n,"/intervention"),render:function(t){return Object(Q.jsx)(Je,Object(c.a)(Object(c.a)(Object(c.a)({},t),e),{},{socket:e.socket,showSub:e.showSub,numSelectedIntervention:e.numSelectedIntervention}))}}),Object(Q.jsx)(D.a,{exact:!0,from:n,to:"".concat(n,"/ask")})]})]})]})}var ot=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(d.a)(this,n);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).determineRender=function(){return e.props.conditionIn()?e.props.render:e.props.redirectRender},e}return Object(p.a)(n,[{key:"render",value:function(){return Object(Q.jsx)(D.b,{path:this.props.path,render:this.determineRender()})}}]),n}(s.a.Component),st=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).setCredentials=function(e){o.computedHash_TECH_MAIN=null,o.computedHash_USER=null,o.setState({logged:e.logged,num_user:e.num_user,username:e.username,type_user:e.type_user})},o.logOut=function(){o.setCredentials({logged:!1,num_user:"",username:"",type_user:null})},o.componentDidMount=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("======= APP component did mount , state ",o.state),!("true"===localStorage.getItem("logged"))){e.next=12;break}return console.log("compute hmac for user , tech_main"),e.next=6,j(g.code,o.state.username);case 6:return t=e.sent,e.next=9,j(f.code,o.state.username);case 9:n=e.sent,console.log(" after compute ",t,n),o.setState({t_u:t,t_t:n});case 12:case"end":return e.stop()}}),e)}))),console.log("======== APP constructor"),o.state={logged:"true"===localStorage.getItem("logged")||!1,num_user:localStorage.getItem("num_user")||"",username:localStorage.getItem("username")||"",type_user:localStorage.getItem("type_user")||null,t_u:null,t_t:null},o.computedHash_USER=null,o.computedHash_TECH_MAIN=null,console.log("constructor",o.state),o}return Object(p.a)(n,[{key:"shouldComponentUpdate",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("==== APP shouldComponentUpdate  state",n),this.state.logged===n.logged){e.next=18;break}if(console.log("compute hmac for user , tech_main"),n.logged){e.next=8;break}o=null,s=null,e.next=14;break;case 8:return e.next=10,j(g.code,n.username);case 10:return o=e.sent,e.next=13,j(f.code,n.username);case 13:s=e.sent;case 14:console.log(" after compute ",o,s),this.setState({t_u:o,t_t:s}),e.next=19;break;case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){console.log("==== APP componentDidUpdate "),localStorage.setItem("logged",this.state.logged),localStorage.setItem("num_user",this.state.num_user),localStorage.setItem("username",this.state.username),localStorage.setItem("type_user",this.state.type_user)}},{key:"render",value:function(){var e=this;console.log("===== APP render"),console.log("state ",this.state);var t,n=function(){if(console.log("==== determineRootRedirect function "),console.log("state in determineRootRedirect ",e.state),console.log(" computedhash ",e.state.t_u,e.state.t_t),e.state.logged){if(console.log(" logged"),e.state.type_user===e.state.t_u)return"/notify";if(e.state.type_user===e.state.t_t)return"/acim"}return console.log("no logged"),console.log("==== end determineRootRedirect "),"/login"}();return console.log("redirectTo ",n),this.state.logged&&(t={num_user:this.state.num_user,username:this.state.username,type_user:this.state.type_user}),console.log("=== end of render appp"),Object(Q.jsx)(L,{children:Object(Q.jsx)("div",{className:"App",children:Object(Q.jsxs)(D.d,{children:[Object(Q.jsx)(ot,{path:"/login",conditionIn:function(){return!e.state.logged},render:function(t){return Object(Q.jsx)(N,Object(c.a)(Object(c.a)({},t),{},{setCredentials:e.setCredentials}))},redirectRender:function(e){return Object(Q.jsx)(D.a,{to:n})}}),Object(Q.jsx)(ot,{path:"/acim",conditionIn:function(){return!(!e.state.logged||e.state.type_user!==e.state.t_t)},render:function(n){return Object(Q.jsx)(ze,Object(c.a)(Object(c.a)({},n),{},{session:t,logOut:e.logOut}))},redirectRender:function(e){return Object(Q.jsx)(D.a,{to:n})}}),Object(Q.jsx)(ot,{path:"/notify",conditionIn:function(){return!(!e.state.logged||e.state.type_user!==e.state.t_u)},render:function(n){return Object(Q.jsx)(tt,Object(c.a)(Object(c.a)({},n),{},{session:t,logOut:e.logOut}))},redirectRender:function(e){return Object(Q.jsx)(D.a,{to:n})}}),Object(Q.jsx)(D.b,{path:"/info",children:Object(Q.jsxs)("dl",{children:[Object(Q.jsx)("dt",{children:" a.c.i.m.i "}),Object(Q.jsx)("dd",{children:" Application de Coordination des Interventions de Maintenance Informatiques"})]})}),Object(Q.jsx)(D.a,{from:"/",to:"/login"})]})})})}}]),n}(s.a.Component),it=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,403)).then((function(t){var n=t.getCLS,o=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),o(e),s(e),i(e),r(e)}))};r.a.render(Object(Q.jsx)(s.a.StrictMode,{children:Object(Q.jsx)(S.a,{children:Object(Q.jsx)(st,{})})}),document.getElementById("root")),it()}},[[401,1,2]]]);
//# sourceMappingURL=main.8bec983e.chunk.js.map